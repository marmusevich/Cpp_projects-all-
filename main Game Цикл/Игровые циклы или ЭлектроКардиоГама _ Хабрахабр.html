<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" SYSTEM "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru">
	
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<head>
		
		<title>Игровые циклы или ЭлектроКардиоГама / Хабрахабр</title>
		<meta name="description" content="Игровой цикл — это пульс каждой игры. Ни одна игра не будет работать без этого. Однако, к несчастью каждого нового разработчика игр, в сети нет хороших статей, в которых уделено достаточное...">		
		<meta name="keywords" content="game loop, реализация, решения, gamedev">

		
		
			<link href="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/all00000.css" rel="stylesheet" media="all">
		
    
		
  <link href="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/posts000.css" rel="stylesheet" media="all">
  <link href="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/comments.css" rel="stylesheet" media="all">
  <link href="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/forms000.css" rel="stylesheet" media="all">
  <link href="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/highligh.css" rel="stylesheet" media="all">
  <link href="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/all00001.css" rel="stylesheet" media="all">


		
		
			<script type="text/javascript" src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/all00000.js"></script>
		
		
		
		
			
		
  <script type="text/javascript" src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/jquery00.js"></script>
  <script type="text/javascript" src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/jquery01.js"></script>
  <script type="text/javascript" src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/wysiwyg0.js"></script>
  <script type="text/javascript" src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/highligh.js"></script>
  <script type="text/javascript" src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/posts000.js"></script>
  <script type="text/javascript" src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/comments.js"></script>
  <script type="text/javascript" src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/all00001.js"></script>

		
		<script type="text/javascript" src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/adriver0.js"></script>
		
		
		
		<link title="Хабрахабр / Комментарии к публикации «Игровые циклы или ЭлектроКардиоГама»" type="application/rss+xml" rel="alternate" href="http://habrahabr.ru/rss/post/136878/">
		
	</head>

	<body>
	  






	<div id="topline"></div>
	<script type="text/javascript">
	(function(){
		var custom = {};
		
			custom[1]	= 'gdev';
		
		new adriver("topline", {sid:176776, bt:52, bn:1, custom: custom});
	})();
	</script>




		<div id="layout">	    
		  <div id="header">
  <div class="userpanel silver">
    
    
      <a href="http://habrahabr.ru/login/" class="login">войти</a> <a href="http://habrahabr.ru/register/">зарегистрироваться</a>
    
  </div>
  <a class="logo" href="http://habrahabr.ru/" title="На главную страницу"></a>
  <div class="search">
    <form id="search_form" name="search" method="get" action="http://habrahabr.ru/search/">
      <input type="submit" value>
      <input type="text" name="q" value="поиск по сайту" onfocus="this.value = (this.value == 'поиск по сайту') ? '' : this.value" onblur="this.value = (this.value == '') ? 'поиск по сайту' : this.value">
    </form>
  </div>


	<div class="main_menu">
		<a href="http://habrahabr.ru/posts/top/" class="active">посты</a><a href="http://habrahabr.ru/qa/">q&amp;a</a><a href="http://habrahabr.ru/events/coming/">события</a><a href="http://habrahabr.ru/hubs/">хабы</a><a href="http://habrahabr.ru/companies/">компании</a>
		<div class="banner_special">

	 

	 

	
	
		<!--  AdRiver code START. Type:135x35 Site: habrahabr PZ: 0 BN: 0 -->
		<script language="javascript" type="text/javascript"><!--
		var RndNum4NoCash = Math.round(Math.random() * 1000000000);
		var ar_Tail='unknown'; if (document.referrer) ar_Tail = escape(document.referrer);
		document.write(
		'<iframe src="http://ad.adriver.ru/cgi-bin/erle.cgi?'
		+ 'sid=176776&target=top&w=135&h=35&bt=25&pz=0&rnd=' + RndNum4NoCash + '&tail256=' + ar_Tail
		+ '" frameborder=0 vspace=0 hspace=0 width=135 height=35 marginwidth=0'
		+ ' marginheight=0 scrolling=no></iframe>');
		//--></script>
		<noscript>
		<a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=176776&amp;bt=25&amp;pz=0&amp;rnd=795668059" target="_top">
		<img src="http://ad.adriver.ru/cgi-bin/rle.cgi?sid=176776&amp;bt=25&amp;pz=0&amp;rnd=795668059" alt="-AdRiver-" border="0" width="135" height="35"></a>
		</noscript>

		<!--  AdRiver code END  -->
	
	

</div>
	</div>


</div>


	
		  
	  
		  


	
  <div class="content_left">

	









	

		
  <div class="post translation shortcuts_item" id="post_136878">
    <h1 class="title">
	      
      


      
        <span class="post_title">Игровые циклы или ЭлектроКардиоГама</span>
      
      
			<span class="translation">перевод</span>
			
  		
  	</h1>
  	
  	
<div class="hubs">
	
		<a href="http://habrahabr.ru/hub/gdev/" class="hub " title="Вы не подписаны на этот хаб">Game Development</a><span class="profiled_hub" title="Профильный хаб">*</span>
	
</div>

  	
    <div class="content html_format">
      Игровой цикл — это пульс каждой игры. Ни одна игра не будет работать без этого. Однако, к несчастью каждого нового разработчика игр, в сети нет хороших статей, в которых уделено достаточное внимание этой теме. Но не печальтесь, потому как только что вы получили возможность прочитать единственную в своем роде статью, уделяющую вопросу игровых циклов заслуженное внимание. По долгу службы мне часто приходится иметь дело с большим количеством кода мелких мобильных игр. И я каждый раз удивляюсь сколь много существует реализаций игрового цикла. Вы тоже можете удивиться как можно для такой, казалось бы простой, вещи можно придумать множество имплементаций. А ведь можно! И в статье я постараюсь рассказать о достоинствах и недостатках наиболее популярных вариантов игровых циклов. Также я постараюсь описать наилучший на мой взгляд вариант реализации игрового цикла. <br>
(Thanks to Kao Cardoso Félix this article is also available in Brazilian Portuguese) (Thanks for me, in Russian also, прим. перев.)<br>
<a name="habracut"></a><br>
<h4>Игровой цикл</h4><br>
Каждая игра содержит последовательность вызовов чтения пользовательского ввода, обновления состояния игры, обработки ИИ, проигрывания музыки и звуковых эффектов, отрисовки графики. Эта последовательность вызовов выполняется внутри игрового цикла. Т.е., как и было сказано в тизере, игровой цикл — это пульс каждой игры. В статье я не буду углубляться в детали реализации упомянутых выше тасков, а сконцентрируюсь исключительно на проблеме игрового цикла. По той же причине я упрощу список тасков до двух функций: обновление состояния и отрисовка. Ниже представлен пример кода для наиболее простой реализации игрового цикла.<br>
<pre><code class="python"> bool game_is_running = true;
    while( game_is_running ) {
        update_game();
        display_game();
    }</code></pre><br>
<br>
Проблема этой реализации в том, что она не обрабатывает время. Игра просто выполняется. На слабом железе игра работает медленно, на сильном — быстро. Давным давно, когда производительность компьютера была известной и примерно одинаковой на разных машинах, такая реализация не рождала проблем. Сегодня же, когда существует множество платформ с разной производительностью, появилась необходимость в обработке времени. Сделать это можно разными путями. О них я расскажу позже. А пока позвольте мне разъяснить пару моментов, которые дальше будут использоваться.<br>
<br>
<b>FPS</b><br>
FPS — это аббревиатура от «Frames Per Second» (Кадров В Секунду, прим. перев.). В контексте представленной выше реализации игрового цикла это количество вызовов display_game() за одну секунду.<br>
<br>
<b>Скорость игры</b><br>
Скорость игры — это количество обновлений состояния игры за одну секунду. Иными словами, количество вызовов update_game() в секунду времени.<br>
<br>
<h4>FPS, зависящий от постоянной скорости игры</h4><br>
<h5>Реализация</h5><br>
Самое простое решение проблемы тайминга — просто выполнять вызовы с фиксированной частотой 25 раз/сек. Код, реализующий этот подход ниже.<br>
<pre><code class="python">const int FRAMES_PER_SECOND = 25;
    const int SKIP_TICKS = 1000 / FRAMES_PER_SECOND;

    DWORD next_game_tick = GetTickCount();
    // GetTickCount() returns the current number of milliseconds
    // that have elapsed since the system was started

    int sleep_time = 0;

    bool game_is_running = true;

    while( game_is_running ) {
        update_game();
        display_game();

        next_game_tick += SKIP_TICKS;
        sleep_time = next_game_tick - GetTickCount();
        if( sleep_time &gt;= 0 ) {
            Sleep( sleep_time );
        }
        else {
            // Shit, we are running behind!
        }
    }</code></pre><br>
<br>
Это реализация с одним большим плюсом: ПРОСТОТА! Коль скоро вы знаете, что update_game() вызывается 25 раз в секунду, написание остального кода становится проще пареной репы. К примеру, реализация функционала реплея становится тривиальной задачей. Если в игре не используются случайные величины, то вы просто можете логгировать пользовательский ввод и воспроизводить его позже. На своей тестовой машине вы можете подобрать некое компромиссное значение для FRAMES_PER_SECOND, но что произойдет на более быстром или более медленном железе? Давайте выясним это.<br>
<br>
<h5>Слабое железо</h5><br>
Если железо способно выдерживать заданное FPS, то проблемы нет. Проблемы появятся, когда машина не сможет держать FPS на заданном уровне. Игра будет работать медленнее. В худшем случае игра будет лагать некоторые промежутки времени, а в другие работать нормально. Время будет течь с разной скоростью, что в итоге может сделать вашу игру неиграбельной.<br>
<br>
<h5>Производительное железо</h5><br>
На мощном железе проблем не будет, но компьютер будет простаивать, тратя впустую «драгоценное» (видимо это ирония? — прим. перев.) процессорное время. Постыдились бы запускать игру с 25..30 FPS, когда она могла бы выдавать из за 300! Ваша игра потеряет в привлекательности по сравнению с тем, что она могла бы показать при использовании процессора на всю катушку. С другой стороны на мобильных платформах оно может быть и к лучшему — позволит сэкономить энергию.<br>
<br>
<h5>Вывод</h5><br>
Завязывание FPS на фиксированную скорость игры — решение простое, позволяющее сохранить простоту кода. Но есть проблемы: задав слишком большое значение для FPS мы породим проблемы на слабом железе; задав слишком низкое значение мы неэффективно будем использовать мощное железо.<br>
<br>
<h4>Скорость игры, зависящая от переменного FPS</h4><br>
<h5>Реализация</h5><br>
Другое решение проблемы — дать игре работать как можно быстрее и сделать скорость игры зависящей от текущего FPS. Игра будет обновляться с использованием промежутка времени, потраченного на отрисовку предыдущего кадра.<br>
<pre><code class="python">DWORD prev_frame_tick;
    DWORD curr_frame_tick = GetTickCount();

    bool game_is_running = true;
    while( game_is_running ) {
        prev_frame_tick = curr_frame_tick;
        curr_frame_tick = GetTickCount();

        update_game( curr_frame_tick - prev_frame_tick );
        display_game();
    }</code></pre><br>
Код усложняется, т.к. мы теперь должны обрабатывать дельту времени в update_game(). Но усложнился код несильно. Я видел много сообразительных разработчиков, которые реализовывали такой подход. Наверняка кто-то из них хотел бы иметь возможность прочитать этот пост, до того, как реализовали такой цикл самостоятельно. Ниже я покажу почему такой подход может иметь серьезные проблемы как на слабом железе, так и на мощном (да… и на мощном тоже).<br>
<br>
<h5>Слабое железо</h5><br>
Слабое железо может иногда породить задержки в местах, где игра становится «тяжеловата». Это определенно будет иметь место в 3D играх, когда слишком много полигонов отрисовывается. В результате провал в FPS приведет к замедлению обработки пользовательского ввода. Обновление игры будет реагировать на провалы FPS, в результате состояние игры будет изменяться с заметными лагами. В результате время реакции игрока, ровно как и ИИ, замедлится, что может сделать даже простой маневр невозможным. К примеру, препятствие, которое можно преодолеть при нормальном FPS, будет невозможно преодолеть при низком FPS. Еще более серьезные проблемы на слабом железе будут при использовании физики. Симуляция физики может "<a href="http://gafferongames.com/game-physics/fix-your-timestep/">взорваться</a>". <br>
<br>
<h5>Мощное железо</h5><br>
Вы можете удивиться тому, что представленная выше реализация игрового цикла может работать неправильно на быстром железе. К сожалению может. И прежде чем показать почему, позвольте немного разъяснить некоторые моменты математики на компьютере. В виду конечной разрядности представления числа в форме с плавающей точкой, некоторые значения не могут быть представлены. Так, значение 0.1 не может быть представлено в двоичном виде и будет округлено при хранении в переменной типа double. Продемонстрирую это с использованием консоли python:<br>
<code>&gt;&gt;&gt; 0.1<br>
0.10000000000000001</code><br>
Само по себе это нестрашно, но в последовательных вычислениях приводит к проблемам. Пусть у вас есть машина, скорость которой равна 0.001 в попугаях (вольный перевод, прим. перев.). Через 10 секунд машина переместится на расстояние 10.0 попугаев. Если разобьем это вычисление по кадрам, то получим следующую функцию с FPS в качестве параметра:<br>
<code>&gt;&gt;&gt; def get_distance( fps ):<br>
... skip_ticks = 1000 / fps<br>
... total_ticks = 0<br>
... distance = 0.0<br>
... speed_per_tick = 0.001<br>
... while total_ticks &lt; 10000:<br>
... distance += speed_per_tick * skip_ticks<br>
... total_ticks += skip_ticks<br>
... return distance</code><br>
<br>
А нука попробуем посчитать пройденный путь для 40 FPS.<br>
<code>&gt;&gt;&gt; get_distance( 40 )<br>
10.000000000000075</code><br>
<br>
Постойте ка! Это не 10.0 попугаев! Что произошло? Все просто… Т.к. мы разбили вычисление пути на 400 кадров, то при суммировании накопилась значительная ошибка. Представляете что будет при 100 FPS?<br>
<code>&gt;&gt;&gt; get_distance( 100 )<br>
9.9999999999998312</code><br>
<br>
Вот это да! Ошибка стала еще больше!!! Это потому, что мы делаем еще больше сложений при 100 FPS. Стало быть и ошибка накапливается больше. Таким образом, игра будет работать по-разному при 40 FPS и 100 FPS.<br>
<code>&gt;&gt;&gt; get_distance( 40 ) - get_distance( 100 )<br>
2.4336088699783431e-13</code><br>
Вы можете подумать, что такая разница незначительна и ею можно пренебречь. Однако, если вы будете использовать это значение еще в каких-либо вычислениях, то проблемы возникнут более серьезные (как пример — интегрирование дифф. ур-ий, прим. перев.). Таким образом, ошибка может накопиться настолько большая, что зафакапит (чуть цензурнее чем в оригинале, прим. перев.) ваш продукт на больших FPS. Вы спросите насколько это вероятно? Достаточно вероятно, чтобы обратить на себя внимание. Я имел честь лицезреть игру с такой реализацией игрового цикла. И, действительно, в ней были проблемы при больших FPS. После того, как разработчик понял, что «собака зарыта» в самом ядре игрового кода, понадобилось отрефакторить тонну кода, чтобы починить багу.<br>
<br>
<h5>Вывод</h5><br>
На первый взгляд этот тип игрового цикла кажется очень хорошим, но только на первый. Как слабое, так и мощное железо смогут породить проблемы. Кроме того, реализация функции обновления состояния усложнилось по сравнению с первой реализацией. Стало быть в топку ее?<br>
<br>
<h4>Постоянная скорость игры и максимальное FPS</h4><br>
<h5>Реализация</h5><br>
Наша первая реализация, «FPS, зависящее от постоянной скорости игры», имеет проблемы на слабом железе. Она порождает лаги как FPS так и обновления состояния игры. Возможное решение этой проблемы — выполнять обновление состояния с фиксированной частотой, но снижать частоту отрисовки. Ниже код реализации такого подхода:<br>
<pre><code class="python">const int TICKS_PER_SECOND = 50;
    const int SKIP_TICKS = 1000 / TICKS_PER_SECOND;
    const int MAX_FRAMESKIP = 10;

    DWORD next_game_tick = GetTickCount();
    int loops;

    bool game_is_running = true;
    while( game_is_running ) {

        loops = 0;
        while( GetTickCount() &gt; next_game_tick &amp;&amp; loops &lt; MAX_FRAMESKIP) {
            update_game();

            next_game_tick += SKIP_TICKS;
            loops++;
        }

        display_game();
    }</code></pre><br>
 <br>
Игра будет обновляться с фиксированной частотой 50 раз в секунду, а отрисовка будет выполняться с максимально возможной частотой. Заметьте, если отрисовка будет выполняться чаще чем обновление состояние, то некоторые соседние кадрый будут одинаковыми, так что в действительности максимальное значение FPS будет ограничено частотой обновления состояния игры. На слабом железе FPS будет снижаться до тех пор, пока цикл обновления состояния не будет достигать значения MAX_FRAMESKIP. На практике это означает, что игра действительно начнет тормозить, только когда FPS отрисовки проседает ниже значения 5 (= FRAMES_PER_SECOND / MAX_FRAMESKIP).<br>
<br>
<h5>Слабое железо</h5><br>
На слабом железе FPS просядет, но сама игра будет работать с большой вероятностью на нормальной скорости. Если же железо не сможет выдерживать даже минимальное FPS, то начнет тормозить и обновление состояния, а отрисовка потеряет даже намек на плавную анимацию.<br>
<br>
<h5>Мощное железо</h5><br>
На мощном железе игра будет работать без особых проблем, но как и в первой реализации процессор будет использоваться неэффективно. Поиск баланса между быстрым обновлением и возможностью работать на слабом железе получает решающее значение.<br>
<br>
<h5>Вывод</h5><br>
Использование фиксированной скорости игры и максимально возможного FPS — решение, которое несложно реализовать и которое сохраняет код простым. Но все равно имеются некоторые проблемы: задание слишком большой частоты обновления состояния породит проблемы на слабом железе (пусть и не настолько серьезные, как в случае первой реализации), а задание малой частоты обновления состояния будет неэффективно использовать вычислительные мощности (ресурсы можно было бы использовать для увеличения плавности анимаций, но вместо этого они тратятся на частую отрисовку).<br>
<br>
<h4>Постоянная скорость игры, независящая от переменного FPS</h4><br>
<h5>Реализация</h5><br>
Возможно ли улучшить предыдущую реализацию, чтобы она работала быстрее на слабом железе и была бы визуально привлекательнее на мощном? Ну, к счастью для нас, да, это возможно! Состояние игры не нужно обновлять 60 раз в секунду. Пользовательский ввод, ИИ, а также обновление состояния игры, достаточно обновлять 25 раз в секунду (я с этим не согласен, не всегда, прим. перев.). Так что давайте вызывать update_game() 25 раз в секунду, не чаще, не реже. А вот отрисовка пусть выполняется так часто, как железо потянет. Но медленная отрисовка не должна сказываться на частоте обновления состояния. Как добиться этого показано в следующем коде.<br>
<pre><code class="python">const int TICKS_PER_SECOND = 25;
    const int SKIP_TICKS = 1000 / TICKS_PER_SECOND;
    const int MAX_FRAMESKIP = 5;

    DWORD next_game_tick = GetTickCount();
    int loops;
    float interpolation;

    bool game_is_running = true;
    while( game_is_running ) {

        loops = 0;
        while( GetTickCount() &gt; next_game_tick &amp;&amp; loops &lt; MAX_FRAMESKIP) {
            update_game();

            next_game_tick += SKIP_TICKS;
            loops++;
        }

        interpolation = float( GetTickCount() + SKIP_TICKS - next_game_tick )
                        / float( SKIP_TICKS );
        display_game( interpolation );
    }</code></pre><br>
<br>
В результате реализация update_game() останется простой. Однако, к несчатью, функция display_game() становится более сложной. Вам понадобится реализовать интерполяцию и предсказание. Но не волнуйтесь, это не так сложно, как кажется. Позже я расскажу как работают интерполяция и предсказание, но сначала позвольте показать вам зачем они нужны.<br>
<br>
<h4>Зачем нужна интерполяция</h4><br>
Состояние игры обновляется 25 раз в секунду. Поэтому, если не используется интерполяция, то и кадры будут отображаться с той же максимальной частотой. Тут нужно заметить, что 25 кадров в секунду это не так медленно, как кому-то может показаться. К примеру, в фильмах кадры сменяются с частотой 24 кадра в секунду. Так что 25 кадров в секунду кажется достаточным, но не для быстро движущихся объектов. Для таких объектов следует увеличить частоту обновления состояния, чтобы получить более плавную анимацию. Альтернативой увеличенной частоте обновления как раз и служит связка интерполяции и предсказания. <br>
<i>* Прим. перев.: в движке <a href="http://www.neoaxis.com/ru/neoaxis/features/physics">NeoAxis </a>для физического объекта можно выставлять флаг Continuous Collision Detection; подозреваю, что по нему как раз и выполняется обработка, подобная описанной выше реализации игрового цикла.</i><br>
<br>
<h4>Интерполяция и предсказание</h4><br>
Как было написано выше, состояние обновляется на своей, независимой, частоте. Поэтому возможна ситуация, когда отрисовка начинается между двумя последовательными тиками. Пусть вы обновили состояние в 10 раз. Затем вызывается отрисовка и выполняется она где-то между 10 и 11 тиками. Пусть это будет дискретное время 10.3. В результате «interpolation» будет иметь значение 0.3. В качестве примера, представьте машину, движущуююся следующим образом:<br>
<code>position = position + speed;</code><br>
Если на 10 шаге цикла обновления состояния позиция будет 500, скорость будет 100, тогда на 11 шаге позиция будет 600. Так какова же будет позиция машины во время отрисовки? Можно просто взять позицию на последнем шаге, т.е. 500. Но куда лучше предсказать позицию на следующем шаге и произвести интерполяцию для времени 10.3. Получим код вида:<br>
<code>view_position = position + (speed * interpolation)</code><br>
Таким образом машина будет отрисована в позиции 530. Переменная «interpolation» в общем случае содержит значение от 0 до 1 относительной позиции во времени между текущим и следующим кадрами (переделано для лучшего понимания, прим. перев.). Нет нужды делать предсказание слижком сложным, чтобы обеспечить плавность анимации. Конечно, возможна ситуация когда один объект частично пересечется с другим непосредственно перед детектированием коллизии. Но, как мы увидели ранее, состояние игры обновляется 25 раз в секунду, поэтому артефакт рендеринга будет виден лишь долю секунды (а что если плотность объектов велика и коллизий много? — прим. перев.) и с малой вероятностью он будет замечен пользователем.<br>
<br>
<h5>Слабое железо</h5><br>
В большинстве случаев update_game() будет выполняться намного быстрее, чем display_game(). Фактически мы можем принять как данность, что даже на слабом железе функция update_game() вызывается 25 раз в секунду. Поэтому наша игра будет обрабатывать пользовательский ввод и обновление состояние без особых проблем даже в случае, когда отрисовка выполняется на частоту 15 кадров в секунду.<br>
<br>
<h5>Мощное железо</h5><br>
На мощном железе, игра будет по-прежнему идти с фиксированной скоростью 25 тиков в секунду, но отрисовка будет выполняться быстрее. Интерполяция + предсказание добавят привлекательность анимации, т.к. фактически рендеринг будет выполняться на более высоком FPS. Прелесть в том, что таким образом вы мошенничаете с FPS. Вы не обновляете состояние игры с большой частотой, а лишь картинку. Но при этом ваша игра все равно будет иметь высокое FPS.<br>
<br>
<h5>Вывод</h5><br>
Развязка обновления и отрисовки друг от друга кажется лучшим решением. Однако при этом необходимо реализовать интерполяцию и предсказание в display_game(). Правда задача эта не слишком сложная (лишь при использовании примитивной механики объекто, прим. перев.).<br>
<br>
<h4>Заключение</h4><br>
Игровой цикл не такая уж и простая вещь, как вам может показаться. Мы рассмотрели 4 возможные реализации. И среди них есть по крайней мере одна (где обновление состояния жестко завязано на FPS), которую вы определенно должны избегать. Постоянная частота кадров может быть приемлемой на мобильных устройствах. Однако, если вы хотите портировать игру на разные платформы, то придется развязывать частоту обновления и частоту отрисовки, реализовывать интерполяцию и предсказание. Если не хотите заморачиваться с предсказанием и интерполяцией, то можете использовать большую частоту обновления состояния, но найти оптимальное ее значение для слабого и мощного железа может оказаться сложной задачей.<br>
<br>
А теперь марш кодить вашу &lt;%place_your_game_title_here%&gt;!<br>
<br>
<h4>Попутные статьи (от переводчика)</h4><br>
<ol>
<li> <a href="http://habrahabr.ru/blogs/silverlight/125037/">habrahabr.ru/blogs/silverlight/125037/</a> — Игровой цикл в SL</li>
<li> <a href="http://habrahabr.ru/blogs/gdev/112444/">habrahabr.ru/blogs/gdev/112444/</a> — там есть упоминание о том, что в Unity3D нет игрового цикла как такового (видимо он запрятан?)</li>
<li> <a href="http://habrahabr.ru/blogs/gdev/102930/">habrahabr.ru/blogs/gdev/102930/</a> — про создание игрового движка</li>
<li> <a href="http://habrahabr.ru/blogs/android_development/136968/">habrahabr.ru/blogs/android_development/136968/</a> — пример игры на кокосе</li>
<li> <a href="http://gafferongames.com/game-physics/fix-your-timestep/">gafferongames.com/game-physics/fix-your-timestep/</a> — еще одна статья про дискретное время в играх</li>
</ol>
      
  	<div class="clear"></div>
    </div>
    
    
<ul class="tags">
	<li><a href="http://habrahabr.ru/search/?q=%5Bgame%20loop%5D&amp;target_type=posts" rel="tag">game loop</a></li><li>, <a href="http://habrahabr.ru/search/?q=%5B%D1%80%D0%B5%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F%5D&amp;target_type=posts" rel="tag">реализация</a></li><li>, <a href="http://habrahabr.ru/search/?q=%5B%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D1%8F%5D&amp;target_type=posts" rel="tag">решения</a></li><li>, <a href="http://habrahabr.ru/search/?q=%5Bgamedev%5D&amp;target_type=posts" rel="tag">gamedev</a></li>
</ul>


    <div class="infopanel" id="infopanel_post_136878">
	
        
	
	<div class="voting   ">

		
		
		<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
		<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
		

		<div class="mark positive ">
			
			<span class="score" title="Всего 59: ↑57 и ↓2">+55</span>
			
			
		</div>

	</div>
	
	



	<div class="published">27 января 2012, 12:21</div>

	<div class="favorite">
		
		
		<a class="guest" href="http://habrahabr.ru/post/136878/#" onclick="return false;" title="Только зарегистрированные пользователи могут добавлять посты в избранное"></a>
		
	</div>

	<div class="favs_count" title="Количество пользователей, добавивших пост в избранное">339</div>

	
		
		
		<div class="twitter">
			<a href="http://twitter.com/intent/tweet?text=http://habr.ru/p/136878/+%D0%98%D0%B3%D1%80%D0%BE%D0%B2%D1%8B%D0%B5+%D1%86%D0%B8%D0%BA%D0%BB%D1%8B+%D0%B8%D0%BB%D0%B8+%D0%AD%D0%BB%D0%B5%D0%BA%D1%82%D1%80%D0%BE%D0%9A%D0%B0%D1%80%D0%B4%D0%B8%D0%BE%D0%93%D0%B0%D0%BC%D0%B0+%23habr" title="Опубликовать ссылку в Twitter" target="_blank"></a>
		</div>
		<div class="vkontakte">
			<a href="http://vkontakte.ru/share.php?url=http://habr.ru/p/136878/" title="Опубликовать ссылку во ВКонтакте" onclick="window.open(this.href, 'Опубликовать ссылку во Вконтакте', 'width=800,height=300'); return false"></a>
		</div>
		<div class="facebook">
			<a href="https://www.facebook.com/sharer/sharer.php?u=http://habr.ru/p/136878/" title="Опубликовать ссылку в Facebook" onclick="window.open(this.href, 'Опубликовать ссылку в Facebook', 'width=640,height=436,toolbar=0,status=0'); return false"></a>
		</div>
		<div class="googleplus">
			<a href="https://plus.google.com/share?url=http://habr.ru/p/136878/" title="Опубликовать ссылку в Google Plus" onclick="window.open(this.href, 'Опубликовать ссылку в Google Plus', 'width=800,height=300'); return false"></a>
		</div>
		
	

	
	<div class="original-author">
		<a title="Автор оригинала: Koen Witters" href="http://www.koonsolo.com/news/dewitters-gameloop/">Koen Witters</a>
	</div>
	

	

	
	

	
	
	<div class="author">

		<a title="Автор текста" href="http://habrahabr.ru/users/HomoLuden/">HomoLuden</a>
		<span class="rating" title="рейтинг пользователя">39,0</span>
		
			<a href="https://plus.google.com/117856964217889552874/?rel=author" class="googleplus_profile">G+</a>
		
	</div>
	
	

	

	

</div>
<div class="clear"></div>    
    
		
		
	</div>

		
		
<div class="comments_list " id="comments">

  <h2 class="title ">комментарии (<span id="comments_count">61</span>)
    
  </h2>

   
    
<div class="comment_item" id="comment_4564477">
	
	
		<div class="info  	" rel="4564477">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564477" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 3: ↑3 и ↓0">+3</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/OrdJONY/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_21.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/OrdJONY/" class="username">OrdJONY</a>
			<time datetime="2012-01-27T12:55:23+04:00">27 января 2012, 12:55</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564477" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Спасибо за перевод. Очень познавательная статья.<br>
А есть что-то про игровой цикл, но только с распараллеливанием? Например физику обновлять в одном потоке, ИИ в другом, отрисовка в третьем. Как тут быть с синхронизацией и взаимодействием разных компонентов движка между собой? 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564477">
	 
		
<div class="comment_item" id="comment_4564527">
	
	
		<div class="info  	" rel="4564527">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564527" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T13:09:29+04:00">27 января 2012, 13:09</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564527" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564477" data-id="4564527" data-parent_id="4564477" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Я об этом думал… Перевод как первый шаг к имплементации через синглтоны и мультитред. По поводу синхоронизации — все зависит от используемого языка. Там есть ньюансы. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564527">
	 
		
<div class="comment_item" id="comment_4564932">
	
	
		<div class="info  	" rel="4564932">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564932" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/Suvo/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_20.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/Suvo/" class="username">Suvo</a>
			<time datetime="2012-01-27T14:41:49+04:00">27 января 2012, 14:41</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564932" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564527" data-id="4564932" data-parent_id="4564527" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Кажется все-таки синглетоны вообще не причем к возможности распараллеливания. Или я что-то пропустил? 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564932">
	 
		
<div class="comment_item" id="comment_4564981">
	
	
		<div class="info  	" rel="4564981">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564981" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T14:54:40+04:00">27 января 2012, 14:54</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564981" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564932" data-id="4564981" data-parent_id="4564932" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Синглтон + Мультитред (локи, мьютексы и пр.) = доступный отовсюду в аппликейшене тредсейфти сервис. Как-то так. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564981">
	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565177">
	
	
		<div class="info  	" rel="4565177">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565177" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 2: ↑1 и ↓1">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T15:56:29+04:00">27 января 2012, 15:56</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565177" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564932" data-id="4565177" data-parent_id="4564932" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Я это себе так представляю:<br>
1) Есть поток рендеринга — Low Priority<br>
2) Есть поток обновления состояния — High Priority<br>
3) Есть синглтон, хранящий GameState<br>
<br>
Воркфлоу:<br>
А) Поток обновления стейта работает на выбранной частоте и периодически апдейтит закэшированный стейт в синглтоне<br>
Б) Поток рендеринга считывает текущий стейт из синглтона.<br>
В) В синглтоне реализовывается синхронизация. Можно разбить веси стейт на блоки, сделав несколько критических секций. Может еще какие оптимизации.<br>
<br>
Концепт такой. Надо попробовать что-то типа танчиков запилить. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565177">
	 
		
<div class="comment_item" id="comment_4565309">
	
	
		<div class="info  	" rel="4565309">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565309" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/B08AH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/B08AH/" class="username">B08AH</a>
			<time datetime="2012-01-27T16:42:56+04:00">27 января 2012, 16:42</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565309" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565177" data-id="4565309" data-parent_id="4565177" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			как мне кажется GameState не должен быть в единственном экземпляре. иначе получится как при отключенной вертикальной синхронизации верхняя часть экрана одна картинка, нижняя — вторая.<br>
только по объектам разделение, одни по предыдущему отсчету, другие по следущему. результат будет такой, что танчики будут дергаться. и двигаться неравномерно.<br>
его можно разбить на статические данные и динамические. динамические должны иметь по объекту на каждый временной отсчет. которые и будет передаваться от одного треда к другому.<br>
<br>
и не должно быть у потока игросостояния более высокого приоритета. получится, что 1 раз в 40мс он просыпается, что то делает, на это время фпс критически падает. потом он завершается, и фпс взлетает до небес. игра будет пульсирующей.<br>
имхо правильнее сделать, чтоб поток игросостояния так же не был привязан к тому, что его будут вызывать ровно 25 раз в секунду. лучше если он будет просчитывать следующее состояние из рассчета на то, сколько прошло времени. естественно можно выставить некий таргет, и если выполняется быстрее, чем нужно, то можно стравливать время, а если медленнее, то упрощать вычисления, насколько игромеханика это позволяет. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565309">
	 
		
<div class="comment_item" id="comment_4565483">
	
	
		<div class="info  	" rel="4565483">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565483" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T17:39:51+04:00">27 января 2012, 17:39</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565483" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565309" data-id="4565483" data-parent_id="4565309" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			&gt; лучше если он будет просчитывать следующее состояние из рассчета на то, сколько прошло времени<br>
Может я чего то не понял правильно, но в статье про это вроде написано.<br>
<br>
&gt; как мне кажется GameState не должен быть в единственном экземпляре<br>
«НЕ должен быть» — это опечатка? В синглтоне всегда хранится последний стейт. Там я нехорошо написал про несколько критических секций. Все таки секция должна быть одна.<br>
<br>
Про приоритеты… Мы делаем обновление с фиксированной частотой (10, 25 или сколько то еще раз в сек.), и эта частота должна иметь наивысший приоритет. Фактическая частота рендеринга неважна. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565483">
	 
		
<div class="comment_item" id="comment_4565592">
	
	
		<div class="info  	" rel="4565592">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565592" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T18:20:12+04:00">27 января 2012, 18:20</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565592" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565483" data-id="4565592" data-parent_id="4565483" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			&gt; Фактическая частота рендеринга неважна.<br>
Точнее «сколько получится». 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565592">
	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565655">
	
	
		<div class="info  	" rel="4565655">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565655" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/B08AH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/B08AH/" class="username">B08AH</a>
			<time datetime="2012-01-27T18:43:54+04:00">27 января 2012, 18:43</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565655" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565483" data-id="4565655" data-parent_id="4565483" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			1)у автора про отвязку вывода кадров от статических временных промежутков. я имел ввиду, что и просчет игросостояний тоже можно и нужно от них отвязывать.<br>
2) не опечатка. следует читать как неприменимость синглтона. как я это вижу. вместо этого некий таймлайн игровых состояний. в виде очереди. стейт(первый) на -5мс, дальше стейт на +35мс(второй), и дальше еще стейт на +75мс. и отображатель рисует интерполированное состояние между первым и вторым. когда второй стейт достигает нулевой отметки времени, первый освобождается, а позади третьего от другого потока должен приехать четвертый стейт еще на 40мс позже.<br>
3) частота фпс условно не важна. но важна его стабильность. если брать из рассчета 10 стейтов в секунду, то если обработчик состояния каждые 100мс проснется и с высоким приоритетом будет 50мс что то делать, то за это время не будет ни одного кадра. а в следующие 50 мс он уснет, и отображатель нарисует скажем 5-6 кадров. фпс будет достаточно высокий, 50-60, но он будет дерганый, вплоть до неиграбельности. равномерный фпс 25 кадров лучше выглядит, чем настолько неравномерный 60. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565655">
	 
		
<div class="comment_item" id="comment_4565690">
	
	
		<div class="info  	" rel="4565690">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565690" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T19:00:57+04:00">27 января 2012, 19:00</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565690" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565655" data-id="4565690" data-parent_id="4565655" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Если рендеринг будет тяжел, то он просто не будет поспевать за обновлением стейта всего навсего. Отрисовывать рендерер всегда будет последнее состояние. <br>
При малой производительности просто будут пропускаться некоторые промежуточные состояния: к примеру сначала рендеринг начнет отрисовывать состояние между первым тиком и вторым. Будет делать это два-три тика и в следующий раз отрисует состояние между 3 и 4 тиками или между 4 и 5 тиками.<br>
Динамика персонажа не изменится, хоть картинка и будет дерганной. А вот если тяжелый рендеринг будет аффектать обновление стейта, то уже перс начнет вести себя непредсказуемо. Про это в статье и написано.<br>
У вас была ситуация в шутерах на слабом железе, когда инерционность поворота камеры увеличивалась из-за тормозов. Теперь представьте, что вместо инерции будет лишь дрожание картинки, а реакция на мышь останется приличной.<br>
<br>
Про очередь стейтов… Нельзя заранее просчитать несколько стейтов наперед, т.к. они зависят от ввода от юзера. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565690">
	 
		
<div class="comment_item" id="comment_4566125">
	
	
		<div class="info  	" rel="4566125">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566125" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/B08AH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/B08AH/" class="username">B08AH</a>
			<time datetime="2012-01-27T22:12:28+04:00">27 января 2012, 22:12</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566125" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565690" data-id="4566125" data-parent_id="4565690" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			теряется возможность интерполяции и собственно смысл развязки. чтобы иметь 60фпс нужно и стейт просчитывать 60 раз в секунду и кадр отрисовывать 60 раз в секунду. если стейт просчитывается 10 раз в секунду, то и на экране будет 10. формально счетчик покажет 60, но кажые 6 кадров будут одинаковы и пользователь будет видеть 10фпс.<br>
и наоборот, если рендер «тяжелый» и выводит всего 10 фпс, то зачем просчитывать 60 состояний, отображаться будет лишь каждое 6-ое, остальные уйдут в корзину.<br>
очередь стейтов решает вот эти проблемы. если рендер не отобразил стейт, то можно увеличивать время между отсчетами. и наоборот, если рендер быстр, то он и будет определять плавность анимации, а не обработчик состояния.<br>
<br>
А несколько стейтов наперед просчитать можно. вопрос в инпут-лаге.<br>
его кстати надо еще уметь просчитывать. это тоже в тему задач гейм-дева.<br>
если взять опять же supreme commander. то 10 стейтов в секунду он просчитывает. 100мс между отсчетами. если ввод от игрока придет на 101-ой мс, то отклик на его действие попадет в стейт, который начнет просчитываться на 200-ой мс.<br>
допустим стейт просчитывается за 40мс, рендер идет каждые 20мс(50фпс), то получится минимальный инпут лаг в 160мс. если ставить задачу просчитать на один стейт вперед, то инпут лаг становится 260мс. что для реал-тайм стратегий вполне приемлемо. <br>
кстати лобби в этой игре красным отмечает пинг выше 500мс, все что ниже считается приемлемым. <br>
<br>
в случае же шутеров сцена существенно проще, объектов на 2 порядка меньше в такой модели просто нет необходимости. стейт можно просчитывать очень быстро, и не париться интерполяцией, а задавать шаг анимации сразу в стейте. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566125">
	 
		
<div class="comment_item" id="comment_4566146">
	
	
		<div class="info  	" rel="4566146">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566146" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T22:24:05+04:00">27 января 2012, 22:24</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566146" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566125" data-id="4566146" data-parent_id="4566125" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			&gt; теряется возможность интерполяции и собственно смысл развязки<br>
По какой причине? Если интерполяцию сделать невозможно даже приближенно (Хмм а почему, собственно? тоже задумывался, но пока в голову не пришел пример), тогда да… лесом идет эта имплементация с интерполяцией и мы откатываемся обратно к двупоточной системе, где нам уже нужно давать достаточный приоритет обоим.<br>
<br>
&gt; если рендер «тяжелый» и выводит всего 10 фпс, то зачем просчитывать 60 состояний<br>
В случае физики, как раз нужно будет. В статье упомянут «взрыв» симуляции. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566146">
	 
		
<div class="comment_item" id="comment_4566158">
	
	
		<div class="info  	" rel="4566158">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566158" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T22:29:58+04:00">27 января 2012, 22:29</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566158" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566146" data-id="4566158" data-parent_id="4566146" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			По поводу прогноза… Я почему-то понял про прогноз стейтов так, что прогноз делается не на два шага, а на 3, 4, 5 и т.д. Но все равно треть секунды задержка мне кажется значительной. Правда не для RTS, конечно, а для шутеров. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566158">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565906">
	
	
		<div class="info  	" rel="4565906">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565906" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/cyberzx/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_83.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/cyberzx/" class="username">cyberzx</a>
			<time datetime="2012-01-27T20:16:50+04:00">27 января 2012, 20:16</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565906" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564477" data-id="4565906" data-parent_id="4564477" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			можно организовать игровой цикл следующим образом:<br>
<br>
 — главный поток<br>
while (true)<br>
{<br>
 <br>
 update_before_threads &lt; — расчитываем то, что плохо распаралеливается. например, логическое состояние объектов. события, тригерры, реакцию на них<br>
<br>
 — N-потоков по количеству ядер<br>
 update_in_threads &lt; — здесь проивзодим расчёт тяжёлых вычеслений, которые хорошо паралелятся без локов. например collision detection физики, frustum culling, сортировку по альфе, состояние эффектов и т.д.<br>
<br>
 — главный поток<br>
 wait_async_jobs_done <br>
 update_after_threads &lt; — используя те данные, что рассчитались в потоках рассчитываем состояние мира для рендера, <br>
<br>
render_game <br>
 <br>
}<br>
<br>
замечу, что выносить рендеринг в отдельный поток нет смысле. конечно рендер немного жрёт CPU, но основная его работа производится и так паралелльно. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565906">
	 
		
<div class="comment_item" id="comment_4566162">
	
	
		<div class="info  	" rel="4566162">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566162" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T22:35:25+04:00">27 января 2012, 22:35</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566162" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565906" data-id="4566162" data-parent_id="4565906" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Сейчас активно CUDA используют в гейм деве (посмотрите шоукейсы на сайте NVidia). Но это для серьезных разработок. Но уже стираются границы между ЦП и ГП.<br>
А в казуалках 2D акселерация железная, вроде, не так распространена. И тот же XNA ЦП нагружает значительно. Впрочем надо профилировать, чтоб точно сказать что в XNA игрушках (например та же Террария) загружает ЦП. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566162">
	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4567589">
	
	
		<div class="info  	" rel="4567589">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4567589" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/leanid/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/leanid/" class="username">leanid</a>
			<time datetime="2012-01-28T19:32:56+04:00">28 января 2012, 19:32</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4567589" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565906" data-id="4567589" data-parent_id="4565906" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Это реальный способ ускорить игру, другие способы, когда разные подсистемы в отдельные потоки складывают просто не работают из-за тесной связи между ними. Анимация связана с физикой, которая связана с триггерами гейплея, которые вообще в скриптах обрабатываются и тесно связаны с ИИ. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4567589">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4564486">
	
	
		<div class="info  	" rel="4564486">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564486" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/x0rHamster/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_17.png" alt=""></a>
			<a href="http://habrahabr.ru/users/x0rHamster/" class="username">x0rHamster</a>
			<time datetime="2012-01-27T12:57:06+04:00">27 января 2012, 12:57</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564486" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			<i>&gt; Фактически мы можем принять как данность, что даже на слабом железе функция update_game() вызывается 25 раз в секунду. Поэтому наша игра будет обрабатывать пользовательский ввод и обновление состояние без особых проблем даже в случае, когда отрисовка выполняется на частоту 15 кадров в секунду.</i><br>
<br>
Если говорить простыми словами, то я вижу алгоритм таким:<br>
<br>
<pre><code>бесконечный цикл {
    если (update_game() выполняется не чаще 25 раз в секунду) {
        update_game();
    }
    display_game();
}</code></pre><br>
Ну не могу я представить ситуацию, когда при последовательном вызове функций одна будет выполняться чаще, чем другая, при том, что ее запуск «прореживают». В статье ведь не говорится о многопоточности etc. Что я недопонял? 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564486">
	 
		
<div class="comment_item" id="comment_4564539">
	
	
		<div class="info  	" rel="4564539">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564539" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 2: ↑2 и ↓0">+2</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T13:12:14+04:00">27 января 2012, 13:12</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564539" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564486" data-id="4564539" data-parent_id="4564486" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Точно так. И у меня закрались такие же сомнения. От описанного подхода недалеко до мультитреда. Об этом я написал <a href="http://habrahabr.ru/blogs/gdev/136878/#comment_4564527">выше</a>. Думаю автор просто не стал усложнять представление концепции для легкого восприятия навичками. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564539">
	 
		
<div class="comment_item" id="comment_4564755">
	
	
		<div class="info  	" rel="4564755">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564755" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 3: ↑3 и ↓0">+3</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T14:05:12+04:00">27 января 2012, 14:05</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564755" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564539" data-id="4564755" data-parent_id="4564539" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			&gt; навичками<br>
Это не «падонкаффский» диалект. Тупо опечатался. Извините. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564755">
	
	</div>
</div>

	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565078">
	
	
		<div class="info  	" rel="4565078">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565078" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/1x1/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/1x1/" class="username">1x1</a>
			<time datetime="2012-01-27T15:24:12+04:00">27 января 2012, 15:24</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565078" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564486" data-id="4565078" data-parent_id="4564486" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Запуск update_game не прореживают, а «стабилизируют»: она может запускаться как реже (если, к примеру, display_game уложится в 0.01с), так и чаще (0.1с на отображение). Ваш алгоритм на это не способен, увы. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565078">
	 
		
<div class="comment_item" id="comment_4565185">
	
	
		<div class="info  	" rel="4565185">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565185" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные польз4564527" data-id="4564932" data-parent_id="4564527">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Кажется все-таки синглетоны вообще не причем к возможности распараллеливания. Или я что-то пропустил? 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564932">
	 
		
<div class="comment_item" id="comment_4564981">
	
	
		<div class="info  	" rel="4564981">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564981" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T14:54:40+04:00">27 января 2012, 14:54</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564981" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564932" data-id="4564981" data-parent_id="4564932" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Синглтон + Мультитред (локи, мьютексы и пр.) = доступный отовсюду в аппликейшене тредсейфти сервис. Как-то так. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564981">
	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565177">
	
	
		<div class="info  	" rel="4565177">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565177" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 2: ↑1 и ↓1">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T15:56:29+04:00">27 января 2012, 15:56</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565177" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564932" data-id="4565177" data-parent_id="4564932" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Я это себе так представляю:<br>
1) Есть поток рендеринга — Low Priority<br>
2) Есть поток обновления состояния — High Priority<br>
3) Есть синглтон, хранящий GameState<br>
<br>
Воркфлоу:<br>
А) Поток обновления стейта работает на выбранной частоте и периодически апдейтит закэшированный стейт в синглтоне<br>
Б) Поток рендеринга считывает текущий стейт из синглтона.<br>
В) В синглтоне реализовывается синхронизация. Можно разбить веси стейт на блоки, сделав несколько критических секций. Может еще какие оптимизации.<br>
<br>
Концепт такой. Надо попробовать что-то типа танчиков запилить. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565177">
	 
		
<div class="comment_item" id="comment_4565309">
	
	
		<div class="info  	" rel="4565309">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565309" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/B08AH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/B08AH/" class="username">B08AH</a>
			<time datetime="2012-01-27T16:42:56+04:00">27 января 2012, 16:42</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565309" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565177" data-id="4565309" data-parent_id="4565177" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			как мне кажется GameState не должен быть в единственном экземпляре. иначе получится как при отключенной вертикальной синхронизации верхняя часть экрана одна картинка, нижняя — вторая.<br>
только по объектам разделение, одни по предыдущему отсчету, другие по следущему. результат будет такой, что танчики будут дергаться. и двигаться неравномерно.<br>
его можно разбить на статические данные и динамические. динамические должны иметь по объекту на каждый временной отсчет. которые и будет передаваться от одного треда к другому.<br>
<br>
и не должно быть у потока игросостояния более высокого приоритета. получится, что 1 раз в 40мс он просыпается, что то делает, на это время фпс критически падает. потом он завершается, и фпс взлетает до небес. игра будет пульсирующей.<br>
имхо правильнее сделать, чтоб поток игросостояния так же не был привязан к тому, что его будут вызывать ровно 25 раз в секунду. лучше если он будет просчитывать следующее состояние из рассчета на то, сколько прошло времени. естественно можно выставить некий таргет, и если выполняется быстрее, чем нужно, то можно стравливать время, а если медленнее, то упрощать вычисления, насколько игромеханика это позволяет. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565309">
	 
		
<div class="comment_item" id="comment_4565483">
	
	
		<div class="info  	" rel="4565483">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565483" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T17:39:51+04:00">27 января 2012, 17:39</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565483" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565309" data-id="4565483" data-parent_id="4565309" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			&gt; лучше если он будет просчитывать следующее состояние из рассчета на то, сколько прошло времени<br>
Может я чего то не понял правильно, но в статье про это вроде написано.<br>
<br>
&gt; как мне кажется GameState не должен быть в единственном экземпляре<br>
«НЕ должен быть» — это опечатка? В синглтоне всегда хранится последний стейт. Там я нехорошо написал про несколько критических секций. Все таки секция должна быть одна.<br>
<br>
Про приоритеты… Мы делаем обновление с фиксированной частотой (10, 25 или сколько то еще раз в сек.), и эта частота должна иметь наивысший приоритет. Фактическая частота рендеринга неважна. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565483">
	 
		
<div class="comment_item" id="comment_4565592">
	
	
		<div class="info  	" rel="4565592">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565592" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T18:20:12+04:00">27 января 2012, 18:20</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565592" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565483" data-id="4565592" data-parent_id="4565483" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			&gt; Фактическая частота рендеринга неважна.<br>
Точнее «сколько получится». 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565592">
	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565655">
	
	
		<div class="info  	" rel="4565655">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565655" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/B08AH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/B08AH/" class="username">B08AH</a>
			<time datetime="2012-01-27T18:43:54+04:00">27 января 2012, 18:43</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565655" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565483" data-id="4565655" data-parent_id="4565483" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			1)у автора про отвязку вывода кадров от статических временных промежутков. я имел ввиду, что и просчет игросостояний тоже можно и нужно от них отвязывать.<br>
2) не опечатка. следует читать как неприменимость синглтона. как я это вижу. вместо этого некий таймлайн игровых состояний. в виде очереди. стейт(первый) на -5мс, дальше стейт на +35мс(второй), и дальше еще стейт на +75мс. и отображатель рисует интерполированное состояние между первым и вторым. когда второй стейт достигает нулевой отметки времени, первый освобождается, а позади третьего от другого потока должен приехать четвертый стейт еще на 40мс позже.<br>
3) частота фпс условно не важна. но важна его стабильность. если брать из рассчета 10 стейтов в секунду, то если обработчик состояния каждые 100мс проснется и с высоким приоритетом будет 50мс что то делать, то за это время не будет ни одного кадра. а в следующие 50 мс он уснет, и отображатель нарисует скажем 5-6 кадров. фпс будет достаточно высокий, 50-60, но он будет дерганый, вплоть до неиграбельности. равномерный фпс 25 кадров лучше выглядит, чем настолько неравномерный 60. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565655">
	 
		
<div class="comment_item" id="comment_4565690">
	
	
		<div class="info  	" rel="4565690">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565690" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T19:00:57+04:00">27 января 2012, 19:00</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565690" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565655" data-id="4565690" data-parent_id="4565655" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Если рендеринг будет тяжел, то он просто не будет поспевать за обновлением стейта всего навсего. Отрисовывать рендерер всегда будет последнее состояние. <br>
При малой производительности просто будут пропускаться некоторые промежуточные состояния: к примеру сначала рендеринг начнет отрисовывать состояние между первым тиком и вторым. Будет делать это два-три тика и в следующий раз отрисует состояние между 3 и 4 тиками или между 4 и 5 тиками.<br>
Динамика персонажа не изменится, хоть картинка и будет дерганной. А вот если тяжелый рендеринг будет аффектать обновление стейта, то уже перс начнет вести себя непредсказуемо. Про это в статье и написано.<br>
У вас была ситуация в шутерах на слабом железе, когда инерционность поворота камеры увеличивалась из-за тормозов. Теперь представьте, что вместо инерции будет лишь дрожание картинки, а реакция на мышь останется приличной.<br>
<br>
Про очередь стейтов… Нельзя заранее просчитать несколько стейтов наперед, т.к. они зависят от ввода от юзера. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565690">
	 
		
<div class="comment_item" id="comment_4566125">
	
	
		<div class="info  	" rel="4566125">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566125" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/B08AH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/B08AH/" class="username">B08AH</a>
			<time datetime="2012-01-27T22:12:28+04:00">27 января 2012, 22:12</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566125" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565690" data-id="4566125" data-parent_id="4565690" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			теряется возможность интерполяции и собственно смысл развязки. чтобы иметь 60фпс нужно и стейт просчитывать 60 раз в секунду и кадр отрисовывать 60 раз в секунду. если стейт просчитывается 10 раз в секунду, то и на экране будет 10. формально счетчик покажет 60, но кажые 6 кадров будут одинаковы и пользователь будет видеть 10фпс.<br>
и наоборот, если рендер «тяжелый» и выводит всего 10 фпс, то зачем просчитывать 60 состояний, отображаться будет лишь каждое 6-ое, остальные уйдут в корзину.<br>
очередь стейтов решает вот эти проблемы. если рендер не отобразил стейт, то можно увеличивать время между отсчетами. и наоборот, если рендер быстр, то он и будет определять плавность анимации, а не обработчик состояния.<br>
<br>
А несколько стейтов наперед просчитать можно. вопрос в инпут-лаге.<br>
его кстати надо еще уметь просчитывать. это тоже в тему задач гейм-дева.<br>
если взять опять же supreme commander. то 10 стейтов в секунду он просчитывает. 100мс между отсчетами. если ввод от игрока придет на 101-ой мс, то отклик на его действие попадет в стейт, который начнет просчитываться на 200-ой мс.<br>
допустим стейт просчитывается за 40мс, рендер идет каждые 20мс(50фпс), то получится минимальный инпут лаг в 160мс. если ставить задачу просчитать на один стейт вперед, то инпут лаг становится 260мс. что для реал-тайм стратегий вполне приемлемо. <br>
кстати лобби в этой игре красным отмечает пинг выше 500мс, все что ниже считается приемлемым. <br>
<br>
в случае же шутеров сцена существенно проще, объектов на 2 порядка меньше в такой модели просто нет необходимости. стейт можно просчитывать очень быстро, и не париться интерполяцией, а задавать шаг анимации сразу в стейте. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566125">
	 
		
<div class="comment_item" id="comment_4566146">
	
	
		<div class="info  	" rel="4566146">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566146" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T22:24:05+04:00">27 января 2012, 22:24</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566146" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566125" data-id="4566146" data-parent_id="4566125" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			&gt; теряется возможность интерполяции и собственно смысл развязки<br>
По какой причине? Если интерполяцию сделать невозможно даже приближенно (Хмм а почему, собственно? тоже задумывался, но пока в голову не пришел пример), тогда да… лесом идет эта имплементация с интерполяцией и мы откатываемся обратно к двупоточной системе, где нам уже нужно давать достаточный приоритет обоим.<br>
<br>
&gt; если рендер «тяжелый» и выводит всего 10 фпс, то зачем просчитывать 60 состояний<br>
В случае физики, как раз нужно будет. В статье упомянут «взрыв» симуляции. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566146">
	 
		
<div class="comment_item" id="comment_4566158">
	
	
		<div class="info  	" rel="4566158">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566158" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T22:29:58+04:00">27 января 2012, 22:29</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566158" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566146" data-id="4566158" data-parent_id="4566146" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			По поводу прогноза… Я почему-то понял про прогноз стейтов так, что прогноз делается не на два шага, а на 3, 4, 5 и т.д. Но все равно треть секунды задержка мне кажется значительной. Правда не для RTS, конечно, а для шутеров. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566158">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565906">
	
	
		<div class="info  	" rel="4565906">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565906" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/cyberzx/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_83.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/cyberzx/" class="username">cyberzx</a>
			<time datetime="2012-01-27T20:16:50+04:00">27 января 2012, 20:16</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565906" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564477" data-id="4565906" data-parent_id="4564477" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			можно организовать игровой цикл следующим образом:<br>
<br>
 — главный поток<br>
while (true)<br>
{<br>
 <br>
 update_before_threads &lt; — расчитываем то, что плохо распаралеливается. например, логическое состояние объектов. события, тригерры, реакцию на них<br>
<br>
 — N-потоков по количеству ядер<br>
 update_in_threads &lt; — здесь проивзодим расчёт тяжёлых вычеслений, которые хорошо паралелятся без локов. например collision detection физики, frustum culling, сортировку по альфе, состояние эффектов и т.д.<br>
<br>
 — главный поток<br>
 wait_async_jobs_done <br>
 update_after_threads &lt; — используя те данные, что рассчитались в потоках рассчитываем состояние мира для рендера, <br>
<br>
render_game <br>
 <br>
}<br>
<br>
замечу, что выносить рендеринг в отдельный поток нет смысле. конечно рендер немного жрёт CPU, но основная его работа производится и так паралелльно. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565906">
	 
		
<div class="comment_item" id="comment_4566162">
	
	
		<div class="info  	" rel="4566162">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566162" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T22:35:25+04:00">27 января 2012, 22:35</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566162" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565906" data-id="4566162" data-parent_id="4565906" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Сейчас активно CUDA используют в гейм деве (посмотрите шоукейсы на сайте NVidia). Но это для серьезных разработок. Но уже стираются границы между ЦП и ГП.<br>
А в казуалках 2D акселерация железная, вроде, не так распространена. И тот же XNA ЦП нагружает значительно. Впрочем надо профилировать, чтоб точно сказать что в XNA игрушках (например та же Террария) загружает ЦП. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566162">
	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4567589">
	
	
		<div class="info  	" rel="4567589">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4567589" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/leanid/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/leanid/" class="username">leanid</a>
			<time datetime="2012-01-28T19:32:56+04:00">28 января 2012, 19:32</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4567589" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565906" data-id="4567589" data-parent_id="4565906" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Это реальный способ ускорить игру, другие способы, когда разные подсистемы в отдельные потоки складывают просто не работают из-за тесной связи между ними. Анимация связана с физикой, которая связана с триггерами гейплея, которые вообще в скриптах обрабатываются и тесно связаны с ИИ. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4567589">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4564486">
	
	
		<div class="info  	" rel="4564486">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564486" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/x0rHamster/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_17.png" alt=""></a>
			<a href="http://habrahabr.ru/users/x0rHamster/" class="username">x0rHamster</a>
			<time datetime="2012-01-27T12:57:06+04:00">27 января 2012, 12:57</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564486" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			<i>&gt; Фактически мы можем принять как данность, что даже на слабом железе функция update_game() вызывается 25 раз в секунду. Поэтому наша игра будет обрабатывать пользовательский ввод и обновление состояние без особых проблем даже в случае, когда отрисовка выполняется на частоту 15 кадров в секунду.</i><br>
<br>
Если говорить простыми словами, то я вижу алгоритм таким:<br>
<br>
<pre><code>бесконечный цикл {
    если (update_game() выполняется не чаще 25 раз в секунду) {
        update_game();
    }
    display_game();
}</code></pre><br>
Ну не могу я представить ситуацию, когда при последовательном вызове функций одна будет выполняться чаще, чем другая, при том, что ее запуск «прореживают». В статье ведь не говорится о многопоточности etc. Что я недопонял? 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564486">
	 
		
<div class="comment_item" id="comment_4564539">
	
	
		<div class="info  	" rel="4564539">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564539" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 2: ↑2 и ↓0">+2</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T13:12:14+04:00">27 января 2012, 13:12</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564539" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564486" data-id="4564539" data-parent_id="4564486" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Точно так. И у меня закрались такие же сомнения. От описанного подхода недалеко до мультитреда. Об этом я написал <a href="http://habrahabr.ru/blogs/gdev/136878/#comment_4564527">выше</a>. Думаю автор просто не стал усложнять представление концепции для легкого восприятия навичками. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564539">
	 
		
<div class="comment_item" id="comment_4564755">
	
	
		<div class="info  	" rel="4564755">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564755" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 3: ↑3 и ↓0">+3</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T14:05:12+04:00">27 января 2012, 14:05</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564755" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564539" data-id="4564755" data-parent_id="4564539" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			&gt; навичками<br>
Это не «падонкаффский» диалект. Тупо опечатался. Извините. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564755">
	
	</div>
</div>

	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565078">
	
	
		<div class="info  	" rel="4565078">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565078" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/1x1/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/1x1/" class="username">1x1</a>
			<time datetime="2012-01-27T15:24:12+04:00">27 января 2012, 15:24</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565078" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564486" data-id="4565078" data-parent_id="4564486" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Запуск update_game не прореживают, а «стабилизируют»: она может запускаться как реже (если, к примеру, display_game уложится в 0.01с), так и чаще (0.1с на отображение). Ваш алгоритм на это не способен, увы. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565078">
	 
		
<div class="comment_item" id="comment_4565185">
	
	
		<div class="info  	" rel="4565185">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565185" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/x0rHamster/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_17.png" alt=""></a>
			<a href="http://habrahabr.ru/users/x0rHamster/" class="username">x0rHamster</a>
			<time datetime="2012-01-27T15:58:33+04:00">27 января 2012, 15:58</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565185" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565078" data-id="4565185" data-parent_id="4565078" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Ъ. Пока писал самый первый комментарий «где же отличие?», до меня дошло, но я случайно нажал на Alt-Home, и простыня комментария с объяснением стерлась (&gt;_&lt;)<br>
<br>
Отличие оказалось в том, как алгоритм будет реагировать на задержку. В моем случае — никак (^_^) В случае алгоритма из статьи оный при выявлении задержки будет обновлять мир столько раз, на сколько этот мир «опаздывает».<br>
<br>
Моя ошибка была в том, что я сделал неверные выводы. Да, update_game() не будет выполняться каждую 1/25 секунды. Обновление может вызываться себе приблизительно с таким интервалом, а потом display_game() напорется на сложную сцену, отрисовка которой займет 1/20 секунды, и следующий update_game() будет вызван уже через 1/5 секунды (5/25 — три интервала, короче), но благодаря такому построению игрового цикла, как в статье, он будет вызван не один, а пять раз, чтобы компенсировать задержку (таким образом, в это время между вызовами update_game() будет проходить 1-2 мс). НО. В среднем (по больнице, есессено, и тем больше по больнице, чем круче скачки FPS) update_game() будет вызываться именно 25 раз в секунду (неважно, с какими промежутками между вызовами), а значит, что можно считать, что между вызовами update_game() в среднем проходит 1/25 секунды.<br>
<br>
И, наконец, описание своими словами алгоритма из статьи:<br>
<br>
<pre><code>бесконечный цикл {
    если (время между вызовами update_game() больше 1/25 секунды) {
        [время_между_вызовами_update_game_в_секундах / (1/25)] раз сделать { update_game(); }
    }
    display_game();
}</code></pre><br>
Есессено, что значение времи между вызовами с учетом единиц измерения (секунд) будет дробным, а значит, что после деления на 1/25 (умножения на 25) нужно взять целое число, но это уже нюансы (равно как и переменные, точки отсчета etc). 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565185">
	 
		
<div class="comment_item" id="comment_4565257">
	
	
		<div class="info  	" rel="4565257">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565257" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/1x1/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/1x1/" class="username">1x1</a>
			<time datetime="2012-01-27T16:21:03+04:00">27 января 2012, 16:21</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565257" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565185" data-id="4565257" data-parent_id="4565185" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Вы предлагаете игнорировать изредка возникающую проблему, автор предлагает её решение. Кроме того, в среднем 25 будет как раз у автора; у вас получится меньше (совсем немного), но это может легко привести, к примеру, к рассинхронизации в мультиплеере.<br>
<br>
Ваш новый алгоритм уже стал сложнее предложенного, и вы забыли про время выполнения самого update_game и MAX_FRAMESKIP. И то и то может иметь значение. А с учётом нюансов, код усложнится ещё сильнее. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565257">
	 
		
<div class="comment_item" id="comment_4565288">
	
	
		<div class="info  	" rel="4565288">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565288" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/x0rHamster/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_17.png" alt=""></a>
			<a href="http://habrahabr.ru/users/x0rHamster/" class="username">x0rHamster</a>
			<time datetime="2012-01-27T16:35:06+04:00">27 января 2012, 16:35</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565288" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565257" data-id="4565288" data-parent_id="4565257" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Я хотел передать общий смысл моей ошибки и причин моего непонимания (^_^)' Естественно, что чем больше требований (точнейшая синхронизация, многопоточность, мультиплеер, да хоть банально replay-movie), тем больше нюансов и тем сложнее алгоритмы. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565288">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4564877">
	
	
		<div class="info  	" rel="4564877">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564877" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/AHTOH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_38.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/AHTOH/" class="username">AHTOH</a>
			<time datetime="2012-01-27T14:29:26+04:00">27 января 2012, 14:29</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564877" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Как же хорошо было с контроллерами прерываний… Нажали кнопку или двинули мышкой и сразу прерывание и его обработка, а пока игрок ничего не вводит, только обсчитываем и отрисовываем. :) 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564877">
	 
		
<div class="comment_item" id="comment_4566031">
	
	
		<div class="info  	" rel="4566031">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566031" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/dmbreaker/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_22.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/dmbreaker/" class="username">dmbreaker</a>
			<time datetime="2012-01-27T21:31:48+04:00">27 января 2012, 21:31</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566031" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564877" data-id="4566031" data-parent_id="4564877" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Довольно часто этот баг встречается у начинающих разработчиков — начинаешь двигать мышью и игра резко начинает жрать много процессора. Поэтому, если по правильному, положение мыши сохраняют и обрабатывают только в update(). Тогда независимо от кол-ва движений мышью игра потребляет одно и то же кол-во ресурсов. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566031">
	 
		
<div class="comment_item" id="comment_4566455">
	
	
		<div class="info  	" rel="4566455">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566455" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  negative">
						<span class="score" title="Всего 1: ↑0 и ↓1">–1</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/AHTOH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_38.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/AHTOH/" class="username">AHTOH</a>
			<time datetime="2012-01-28T01:34:55+04:00">28 января 2012, 01:34</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566455" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566031" data-id="4566455" data-parent_id="4566031" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format bad bad1">
			Если обработка движения мыши начинает жрать много процессора, выкиньте этот процессор. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566455">
	 
		
<div class="comment_item" id="comment_4566477">
	
	
		<div class="info  	" rel="4566477">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566477" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/dmbreaker/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_22.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/dmbreaker/" class="username">dmbreaker</a>
			<time datetime="2012-01-28T01:50:52+04:00">28 января 2012, 01:50</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566477" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566455" data-id="4566477" data-parent_id="4566455" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Вы плохо себе представляете логику работы игры.<br>
Если при каждом событии мыши вы начинаете выполнять относительно непростые действия, то легко получается, что у вас эта обработка фактически вызывается более чем 100 раз в секунду. Для игры это бессмысленно, а нагрузку дает (особенно если это Flash, а если мобильное приложение, то вы бессмысленно «выжигаете» батарею). 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566477">
	 
		
<div class="comment_item" id="comment_4566572">
	
	
		<div class="info  	" rel="4566572">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566572" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/AHTOH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_38.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/AHTOH/" class="username">AHTOH</a>
			<time datetime="2012-01-28T03:04:56+04:00">28 января 2012, 03:04</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566572" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566477" data-id="4566572" data-parent_id="4566477" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Не понимаю, в чем разница? Биос все равно вызывает прерывания по изменению состояния датчиков. Если боитесь слишком часто обрабатывать ввод, то обрабатывайте не каждое изменение, а время проверяйте или в стек записывайте и обрабатывайте уже в самой игре. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566572">
	 
		
<div class="comment_item" id="comment_4566580">
	
	
		<div class="info  	" rel="4566580">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566580" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/dmbreaker/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_22.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/dmbreaker/" class="username">dmbreaker</a>
			<time datetime="2012-01-28T03:09:00+04:00">28 января 2012, 03:09</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566580" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566572" data-id="4566580" data-parent_id="4566572" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Теперь перечитайте мое первое сообщение :) 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566580">
	 
		
<div class="comment_item" id="comment_4566903">
	
	
		<div class="info  	" rel="4566903">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566903" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/AHTOH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_38.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/AHTOH/" class="username">AHTOH</a>
			<time datetime="2012-01-28T12:28:06+04:00">28 января 2012, 12:28</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566903" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566580" data-id="4566903" data-parent_id="4566580" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Вы ответили как противопоставление обработке прерывания при его возникновении. Объявили обработку прерывания багом. И я объяснил, что обработка прерывания это не баг, а вполне рабочий вариант. Возможно, фраза «обработка прерывания» вызвала у Вас ассоциации с работой логической модели игры в зависимости от введенных данных. Это не так. Я про логику игры говорил только, что обсчитываем и отрисовываем, когда игрок ничего не вводит. А Вы? 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566903">
	 
		
<div class="comment_item" id="comment_4566955">
	
	
		<div class="info  	" rel="4566955">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566955" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/dmbreaker/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_22.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/dmbreaker/" class="username">dmbreaker</a>
			<time datetime="2012-01-28T13:06:48+04:00">28 января 2012, 13:06</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566955" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566903" data-id="4566955" data-parent_id="4566903" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Если вы при событии MOUSE_MOVE сохраняете координаты мыши, а обрабатываете после, то у вас по-любом вариант с update/draw, а не обработка по событию.<br>
<br>
«двинули мышкой и сразу прерывание и его обработка» — это событийная модель, и она для игр не подходит.<br>
<br>
«обрабатывайте не каждое изменение, а время проверяйте или в стек записывайте и обрабатывайте уже в самой игре» — это update/draw, и ее все используют. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566955">
	 
		
<div class="comment_item" id="comment_4568135">
	
	
		<div class="info  	" rel="4568135">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4568135" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  negative">
						<span class="score" title="Всего 1: ↑0 и ↓1">–1</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/AHTOH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_38.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/AHTOH/" class="username">AHTOH</a>
			<time datetime="2012-01-29T00:49:30+04:00">29 января 2012, 00:49</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4568135" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566955" data-id="4568135" data-parent_id="4566955" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format bad bad1">
			Само появление события mouse_move — это и есть обработка хардверного прерывания от устройства. Прочитайте внимательно первое сообщение. Вы вообще не по теме отвечаете. Логика игры — это уже выше уровнем. Повторюсь, что логику обсчитываем совершенно отдельно. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4568135">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4564886">
	
	
		<div class="info  	" rel="4564886">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564886" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 9: ↑6 и ↓3">+3</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/rPman/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/rPman/" class="username">rPman</a>
			<time datetime="2012-01-27T14:30:50+04:00">27 января 2012, 14:30</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564886" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Вы издеваетесь (это больше к автору и приверженцам этой тактики), какие циклы, что за 'прошлый век'!<br>
<br>
Событийный механизм — когда обновление экрана делается по времени по алгоритму XX кадров в YY интервал, когда события в игре выполняются строго когда нужно, когда не объекты сдвигаются на пиксел на game_update(), а их координаты вычисляются в момент их запроса.<br>
<br>
И не будет тогда ни проблем с тачпадом (когда при меленном выводе невозможно нарисовать гладкую кривую, хотя проблемы могут вытекать еще глубже — из железа и драйверов), ни глюков с разными скоростями, набегающих из-за ошибок вычислений (того же float — ошибки с ним заметнее) и многого другого можно просто не заметить/не встретить, если правильно изначально НЕ ОРГАНИЗОВЫВТЬ цикл.<br>
<br>
p.s. в конечном счете цикл будет, но не игровой а событийный, и его может реализовывать уже сама библиотека, используемая для организации событий.<br>
<br>
p.p.s. FPS и 30 более чем достаточно, проблема чаще возникает не из-за низкого FPS а из-за его неравномерностей, и самое простое — сначала считаем изображение, затем ждем до момента вывода, затем выводим — т.е. должен быть небольшой лаг в 1/30 секунды (бывают алгоритмы, выдающие лаг в 2-3 кадра).<br>
Еще неплохим решением со слабым железом может быть вывод недоконца построенного изображения (особенно если есть возможность ухудшить качество без уменьшения информативности) это воспринимается гораздо лучше чем пропуск кадров. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564886">
	 
		
<div class="comment_item" id="comment_4565123">
	
	
		<div class="info  	" rel="4565123">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565123" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 3: ↑3 и ↓0">+3</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/Xazzzi/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_32.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/Xazzzi/" class="username">Xazzzi</a>
			<time datetime="2012-01-27T15:37:44+04:00">27 января 2012, 15:37</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565123" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564886" data-id="4565123" data-parent_id="4564886" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Напишите похожую статью про событийный механизм в играх, заинтересовался очень даже… Раньше нигде не встречал подобного подхода. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565123">
	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565160">
	
	
		<div class="info  	" rel="4565160">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565160" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 2: ↑1 и ↓1">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T15:51:24+04:00">27 января 2012, 15:51</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565160" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564886" data-id="4565160" data-parent_id="4564886" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			И мне интересно… Я видимо неправильно понял. Перечитаю еще несколько разков. Но пока сдается мне, что это подобие первого решения в данной статье, но с событиями. Наверняка я ошибаюсь. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565160">
	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565196">
	
	
		<div class="info  	" rel="4565196">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565196" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/x0rHamster/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_17.png" alt=""></a>
			<a href="http://habrahabr.ru/users/x0rHamster/" class="username">x0rHamster</a>
			<time datetime="2012-01-27T16:03:48+04:00">27 января 2012, 16:03</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565196" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564886" data-id="4565196" data-parent_id="4564886" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Одно время уже обсуждали на Хабре события и событийный подход к программированию (кажется, для экономии энергии (читайте — аккумулятора)). Лично я сделал для себя такой вывод: пока не появится удобного (в плане строк кода, подключаемых библиотек, кроссплатформенности и тому подобных шняг) API для аппаратной поддержки событий (прерывания-то есть, но многим работать с ними не очень удобно, да и абстракции вроде API для универсального доступа к устройствам накладывают свои ограничения), события и их обработка в итоге сведутся к тому же бесконечному циклу. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565196">
	 
		
<div class="comment_item" id="comment_4565202">
	
	
		<div class="info  	" rel="4565202">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565202" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/x0rHamster/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_17.png" alt=""></a>
			<a href="http://habrahabr.ru/users/x0rHamster/" class="username">x0rHamster</a>
			<time datetime="2012-01-27T16:04:56+04:00">27 января 2012, 16:04</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565202" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565196" data-id="4565202" data-parent_id="4565196" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			<a href="http://habrahabr.ru/blogs/development/134559/">habrahabr.ru/blogs/development/134559/</a> собственно 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565202">
	
	</div>
</div>

	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565857">
	
	
		<div class="info  	" rel="4565857">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565857" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 2: ↑2 и ↓0">+2</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/cyberzx/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_83.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/cyberzx/" class="username">cyberzx</a>
			<time datetime="2012-01-27T19:54:43+04:00">27 января 2012, 19:54</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565857" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564886" data-id="4565857" data-parent_id="4564886" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			События хороши при реагировании на внешний IO, например обработка сети или ввода. Да и то ввод не всегда событийный: движение мышкаи осей джойстика, ps3eye, xbox kinect, trackir — всё должно обрабатываться с определённой частотой.<br>
А как вы на том же событийном механизме будете расчитывать анимацию, звук, эффекты и т.д.? <br>
Игра (я имею ввиду классические игры под консоли и PC) представляет из себя непрерывно изменяющийся игровой мир, который циклически обновляется и перерасчитывается. Это конечно же не отменяет событийности, все современные игры используют события, но только на одних событиях игру сделаешь.<br>
Всегда должны быть игровые циклы.<br>
<br>
&gt;p.p.s. FPS и 30 более чем достаточно, проблема чаще возникает не из-за низкого FPS а из-за его &gt;неравномерностей, и самое простое — сначала считаем изображение, затем ждем до момента вывода, &gt;затем выводим — т.е. должен быть небольшой лаг в 1/30 секунды (бывают алгоритмы, выдающие лаг в 2-3 &gt;кадра).<br>
Поздравляю с изобритением VSYNC<br>
<br>
 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565857">
	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4565176">
	
	
		<div class="info  	" rel="4565176">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565176" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 1: ↑1 и ↓0">+1</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/B08AH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/B08AH/" class="username">B08AH</a>
			<time datetime="2012-01-27T15:56:24+04:00">27 января 2012, 15:56</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565176" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			наш рабочий проект создавался еще когда не было операционных систем, точнее они были, но их использование было неоправдано. а «многозадачность» нужна. я то тут не так давно, но вот с опухшими глазами смотрю на это. <br>
так вот, там реализован sched вот как раз по этому принципу, только более комплексно. очереди сообщений 2х-милисекундные, 20ти, 100. сам считает таймслайсы, и т.п. <br>
сейчас это все, причем существенно эффективнее делает операционная система. хоть линух, хоть винда дает возможности многозадачности другого порядка.<br>
собственно тут именно эта задача и стоит. два отдельных процесса — обработки состояния игры и ееователи."&gt;</span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/x0rHamster/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_17.png" alt=""></a>
			<a href="http://habrahabr.ru/users/x0rHamster/" class="username">x0rHamster</a>
			<time datetime="2012-01-27T15:58:33+04:00">27 января 2012, 15:58</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565185" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565078" data-id="4565185" data-parent_id="4565078" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Ъ. Пока писал самый первый комментарий «где же отличие?», до меня дошло, но я случайно нажал на Alt-Home, и простыня комментария с объяснением стерлась (&gt;_&lt;)<br>
<br>
Отличие оказалось в том, как алгоритм будет реагировать на задержку. В моем случае — никак (^_^) В случае алгоритма из статьи оный при выявлении задержки будет обновлять мир столько раз, на сколько этот мир «опаздывает».<br>
<br>
Моя ошибка была в том, что я сделал неверные выводы. Да, update_game() не будет выполняться каждую 1/25 секунды. Обновление может вызываться себе приблизительно с таким интервалом, а потом display_game() напорется на сложную сцену, отрисовка которой займет 1/20 секунды, и следующий update_game() будет вызван уже через 1/5 секунды (5/25 — три интервала, короче), но благодаря такому построению игрового цикла, как в статье, он будет вызван не один, а пять раз, чтобы компенсировать задержку (таким образом, в это время между вызовами update_game() будет проходить 1-2 мс). НО. В среднем (по больнице, есессено, и тем больше по больнице, чем круче скачки FPS) update_game() будет вызываться именно 25 раз в секунду (неважно, с какими промежутками между вызовами), а значит, что можно считать, что между вызовами update_game() в среднем проходит 1/25 секунды.<br>
<br>
И, наконец, описание своими словами алгоритма из статьи:<br>
<br>
<pre><code>бесконечный цикл {
    если (время между вызовами update_game() больше 1/25 секунды) {
        [время_между_вызовами_update_game_в_секундах / (1/25)] раз сделать { update_game(); }
    }
    display_game();
}</code></pre><br>
Есессено, что значение времи между вызовами с учетом единиц измерения (секунд) будет дробным, а значит, что после деления на 1/25 (умножения на 25) нужно взять целое число, но это уже нюансы (равно как и переменные, точки отсчета etc). 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565185">
	 
		
<div class="comment_item" id="comment_4565257">
	
	
		<div class="info  	" rel="4565257">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565257" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/1x1/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/1x1/" class="username">1x1</a>
			<time datetime="2012-01-27T16:21:03+04:00">27 января 2012, 16:21</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565257" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565185" data-id="4565257" data-parent_id="4565185" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Вы предлагаете игнорировать изредка возникающую проблему, автор предлагает её решение. Кроме того, в среднем 25 будет как раз у автора; у вас получится меньше (совсем немного), но это может легко привести, к примеру, к рассинхронизации в мультиплеере.<br>
<br>
Ваш новый алгоритм уже стал сложнее предложенного, и вы забыли про время выполнения самого update_game и MAX_FRAMESKIP. И то и то может иметь значение. А с учётом нюансов, код усложнится ещё сильнее. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565257">
	 
		
<div class="comment_item" id="comment_4565288">
	
	
		<div class="info  	" rel="4565288">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565288" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/x0rHamster/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_17.png" alt=""></a>
			<a href="http://habrahabr.ru/users/x0rHamster/" class="username">x0rHamster</a>
			<time datetime="2012-01-27T16:35:06+04:00">27 января 2012, 16:35</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565288" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565257" data-id="4565288" data-parent_id="4565257" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Я хотел передать общий смысл моей ошибки и причин моего непонимания (^_^)' Естественно, что чем больше требований (точнейшая синхронизация, многопоточность, мультиплеер, да хоть банально replay-movie), тем больше нюансов и тем сложнее алгоритмы. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565288">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4564877">
	
	
		<div class="info  	" rel="4564877">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564877" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/AHTOH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_38.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/AHTOH/" class="username">AHTOH</a>
			<time datetime="2012-01-27T14:29:26+04:00">27 января 2012, 14:29</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564877" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Как же хорошо было с контроллерами прерываний… Нажали кнопку или двинули мышкой и сразу прерывание и его обработка, а пока игрок ничего не вводит, только обсчитываем и отрисовываем. :) 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564877">
	 
		
<div class="comment_item" id="comment_4566031">
	
	
		<div class="info  	" rel="4566031">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566031" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/dmbreaker/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_22.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/dmbreaker/" class="username">dmbreaker</a>
			<time datetime="2012-01-27T21:31:48+04:00">27 января 2012, 21:31</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566031" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564877" data-id="4566031" data-parent_id="4564877" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Довольно часто этот баг встречается у начинающих разработчиков — начинаешь двигать мышью и игра резко начинает жрать много процессора. Поэтому, если по правильному, положение мыши сохраняют и обрабатывают только в update(). Тогда независимо от кол-ва движений мышью игра потребляет одно и то же кол-во ресурсов. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566031">
	 
		
<div class="comment_item" id="comment_4566455">
	
	
		<div class="info  	" rel="4566455">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566455" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  negative">
						<span class="score" title="Всего 1: ↑0 и ↓1">–1</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/AHTOH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_38.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/AHTOH/" class="username">AHTOH</a>
			<time datetime="2012-01-28T01:34:55+04:00">28 января 2012, 01:34</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566455" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566031" data-id="4566455" data-parent_id="4566031" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format bad bad1">
			Если обработка движения мыши начинает жрать много процессора, выкиньте этот процессор. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566455">
	 
		
<div class="comment_item" id="comment_4566477">
	
	
		<div class="info  	" rel="4566477">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566477" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/dmbreaker/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_22.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/dmbreaker/" class="username">dmbreaker</a>
			<time datetime="2012-01-28T01:50:52+04:00">28 января 2012, 01:50</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566477" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566455" data-id="4566477" data-parent_id="4566455" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Вы плохо себе представляете логику работы игры.<br>
Если при каждом событии мыши вы начинаете выполнять относительно непростые действия, то легко получается, что у вас эта обработка фактически вызывается более чем 100 раз в секунду. Для игры это бессмысленно, а нагрузку дает (особенно если это Flash, а если мобильное приложение, то вы бессмысленно «выжигаете» батарею). 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566477">
	 
		
<div class="comment_item" id="comment_4566572">
	
	
		<div class="info  	" rel="4566572">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566572" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/AHTOH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_38.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/AHTOH/" class="username">AHTOH</a>
			<time datetime="2012-01-28T03:04:56+04:00">28 января 2012, 03:04</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566572" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566477" data-id="4566572" data-parent_id="4566477" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Не понимаю, в чем разница? Биос все равно вызывает прерывания по изменению состояния датчиков. Если боитесь слишком часто обрабатывать ввод, то обрабатывайте не каждое изменение, а время проверяйте или в стек записывайте и обрабатывайте уже в самой игре. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566572">
	 
		
<div class="comment_item" id="comment_4566580">
	
	
		<div class="info  	" rel="4566580">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566580" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/dmbreaker/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_22.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/dmbreaker/" class="username">dmbreaker</a>
			<time datetime="2012-01-28T03:09:00+04:00">28 января 2012, 03:09</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566580" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566572" data-id="4566580" data-parent_id="4566572" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Теперь перечитайте мое первое сообщение :) 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566580">
	 
		
<div class="comment_item" id="comment_4566903">
	
	
		<div class="info  	" rel="4566903">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566903" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/AHTOH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_38.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/AHTOH/" class="username">AHTOH</a>
			<time datetime="2012-01-28T12:28:06+04:00">28 января 2012, 12:28</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566903" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566580" data-id="4566903" data-parent_id="4566580" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Вы ответили как противопоставление обработке прерывания при его возникновении. Объявили обработку прерывания багом. И я объяснил, что обработка прерывания это не баг, а вполне рабочий вариант. Возможно, фраза «обработка прерывания» вызвала у Вас ассоциации с работой логической модели игры в зависимости от введенных данных. Это не так. Я про логику игры говорил только, что обсчитываем и отрисовываем, когда игрок ничего не вводит. А Вы? 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566903">
	 
		
<div class="comment_item" id="comment_4566955">
	
	
		<div class="info  	" rel="4566955">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566955" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/dmbreaker/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_22.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/dmbreaker/" class="username">dmbreaker</a>
			<time datetime="2012-01-28T13:06:48+04:00">28 января 2012, 13:06</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566955" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566903" data-id="4566955" data-parent_id="4566903" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Если вы при событии MOUSE_MOVE сохраняете координаты мыши, а обрабатываете после, то у вас по-любом вариант с update/draw, а не обработка по событию.<br>
<br>
«двинули мышкой и сразу прерывание и его обработка» — это событийная модель, и она для игр не подходит.<br>
<br>
«обрабатывайте не каждое изменение, а время проверяйте или в стек записывайте и обрабатывайте уже в самой игре» — это update/draw, и ее все используют. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566955">
	 
		
<div class="comment_item" id="comment_4568135">
	
	
		<div class="info  	" rel="4568135">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4568135" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  negative">
						<span class="score" title="Всего 1: ↑0 и ↓1">–1</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/AHTOH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_38.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/AHTOH/" class="username">AHTOH</a>
			<time datetime="2012-01-29T00:49:30+04:00">29 января 2012, 00:49</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4568135" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566955" data-id="4568135" data-parent_id="4566955" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format bad bad1">
			Само появление события mouse_move — это и есть обработка хардверного прерывания от устройства. Прочитайте внимательно первое сообщение. Вы вообще не по теме отвечаете. Логика игры — это уже выше уровнем. Повторюсь, что логику обсчитываем совершенно отдельно. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4568135">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4564886">
	
	
		<div class="info  	" rel="4564886">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4564886" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 9: ↑6 и ↓3">+3</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/rPman/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/rPman/" class="username">rPman</a>
			<time datetime="2012-01-27T14:30:50+04:00">27 января 2012, 14:30</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4564886" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Вы издеваетесь (это больше к автору и приверженцам этой тактики), какие циклы, что за 'прошлый век'!<br>
<br>
Событийный механизм — когда обновление экрана делается по времени по алгоритму XX кадров в YY интервал, когда события в игре выполняются строго когда нужно, когда не объекты сдвигаются на пиксел на game_update(), а их координаты вычисляются в момент их запроса.<br>
<br>
И не будет тогда ни проблем с тачпадом (когда при меленном выводе невозможно нарисовать гладкую кривую, хотя проблемы могут вытекать еще глубже — из железа и драйверов), ни глюков с разными скоростями, набегающих из-за ошибок вычислений (того же float — ошибки с ним заметнее) и многого другого можно просто не заметить/не встретить, если правильно изначально НЕ ОРГАНИЗОВЫВТЬ цикл.<br>
<br>
p.s. в конечном счете цикл будет, но не игровой а событийный, и его может реализовывать уже сама библиотека, используемая для организации событий.<br>
<br>
p.p.s. FPS и 30 более чем достаточно, проблема чаще возникает не из-за низкого FPS а из-за его неравномерностей, и самое простое — сначала считаем изображение, затем ждем до момента вывода, затем выводим — т.е. должен быть небольшой лаг в 1/30 секунды (бывают алгоритмы, выдающие лаг в 2-3 кадра).<br>
Еще неплохим решением со слабым железом может быть вывод недоконца построенного изображения (особенно если есть возможность ухудшить качество без уменьшения информативности) это воспринимается гораздо лучше чем пропуск кадров. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4564886">
	 
		
<div class="comment_item" id="comment_4565123">
	
	
		<div class="info  	" rel="4565123">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565123" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 3: ↑3 и ↓0">+3</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/Xazzzi/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_32.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/Xazzzi/" class="username">Xazzzi</a>
			<time datetime="2012-01-27T15:37:44+04:00">27 января 2012, 15:37</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565123" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564886" data-id="4565123" data-parent_id="4564886" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Напишите похожую статью про событийный механизм в играх, заинтересовался очень даже… Раньше нигде не встречал подобного подхода. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565123">
	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565160">
	
	
		<div class="info  	" rel="4565160">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565160" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 2: ↑1 и ↓1">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T15:51:24+04:00">27 января 2012, 15:51</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565160" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564886" data-id="4565160" data-parent_id="4564886" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			И мне интересно… Я видимо неправильно понял. Перечитаю еще несколько разков. Но пока сдается мне, что это подобие первого решения в данной статье, но с событиями. Наверняка я ошибаюсь. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565160">
	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565196">
	
	
		<div class="info  	" rel="4565196">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565196" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/x0rHamster/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_17.png" alt=""></a>
			<a href="http://habrahabr.ru/users/x0rHamster/" class="username">x0rHamster</a>
			<time datetime="2012-01-27T16:03:48+04:00">27 января 2012, 16:03</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565196" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564886" data-id="4565196" data-parent_id="4564886" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Одно время уже обсуждали на Хабре события и событийный подход к программированию (кажется, для экономии энергии (читайте — аккумулятора)). Лично я сделал для себя такой вывод: пока не появится удобного (в плане строк кода, подключаемых библиотек, кроссплатформенности и тому подобных шняг) API для аппаратной поддержки событий (прерывания-то есть, но многим работать с ними не очень удобно, да и абстракции вроде API для универсального доступа к устройствам накладывают свои ограничения), события и их обработка в итоге сведутся к тому же бесконечному циклу. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565196">
	 
		
<div class="comment_item" id="comment_4565202">
	
	
		<div class="info  	" rel="4565202">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565202" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/x0rHamster/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_17.png" alt=""></a>
			<a href="http://habrahabr.ru/users/x0rHamster/" class="username">x0rHamster</a>
			<time datetime="2012-01-27T16:04:56+04:00">27 января 2012, 16:04</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565202" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565196" data-id="4565202" data-parent_id="4565196" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			<a href="http://habrahabr.ru/blogs/development/134559/">habrahabr.ru/blogs/development/134559/</a> собственно 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565202">
	
	</div>
</div>

	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565857">
	
	
		<div class="info  	" rel="4565857">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565857" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 2: ↑2 и ↓0">+2</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/cyberzx/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_83.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/cyberzx/" class="username">cyberzx</a>
			<time datetime="2012-01-27T19:54:43+04:00">27 января 2012, 19:54</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565857" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4564886" data-id="4565857" data-parent_id="4564886" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			События хороши при реагировании на внешний IO, например обработка сети или ввода. Да и то ввод не всегда событийный: движение мышкаи осей джойстика, ps3eye, xbox kinect, trackir — всё должно обрабатываться с определённой частотой.<br>
А как вы на том же событийном механизме будете расчитывать анимацию, звук, эффекты и т.д.? <br>
Игра (я имею ввиду классические игры под консоли и PC) представляет из себя непрерывно изменяющийся игровой мир, который циклически обновляется и перерасчитывается. Это конечно же не отменяет событийности, все современные игры используют события, но только на одних событиях игру сделаешь.<br>
Всегда должны быть игровые циклы.<br>
<br>
&gt;p.p.s. FPS и 30 более чем достаточно, проблема чаще возникает не из-за низкого FPS а из-за его &gt;неравномерностей, и самое простое — сначала считаем изображение, затем ждем до момента вывода, &gt;затем выводим — т.е. должен быть небольшой лаг в 1/30 секунды (бывают алгоритмы, выдающие лаг в 2-3 &gt;кадра).<br>
Поздравляю с изобритением VSYNC<br>
<br>
 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565857">
	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4565176">
	
	
		<div class="info  	" rel="4565176">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565176" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 1: ↑1 и ↓0">+1</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/B08AH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/B08AH/" class="username">B08AH</a>
			<time datetime="2012-01-27T15:56:24+04:00">27 января 2012, 15:56</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565176" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			наш рабочий проект создавался еще когда не было операционных систем, точнее они были, но их использование было неоправдано. а «многозадачность» нужна. я то тут не так давно, но вот с опухшими глазами смотрю на это. <br>
так вот, там реализован sched вот как раз по этому принципу, только более комплексно. очереди сообщений 2х-милисекундные, 20ти, 100. сам считает таймслайсы, и т.п. <br>
сейчас это все, причем существенно эффективнее делает операционная система. хоть линух, хоть винда дает возможности многозадачности другого порядка.<br>
собственно тут именно эта задача и стоит. два отдельных процесса — обработки состояния игры и ее отображения должны быть полностью независимы, чего собственно и добивается автор пытаясь абстрагировать механику игры от фпс.<br>
<br>
как мне кажется проще и правильнее сделать два треда. в одном updateGame, в другом displayGame. и соответственно первый второму через пайп скармливает данные для отображения.<br>
 чем колхозить вот такую вот «двухзадачность», которая еще и при этом не сможет двухядерник даже напрячь. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565176">
	 
		
<div class="comment_item" id="comment_4565186">
	
	
		<div class="info  	" rel="4565186">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565186" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  negative">
						<span class="score" title="Всего 1: ↑0 и ↓1">–1</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T15:59:00+04:00">27 января 2012, 15:59</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565186" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565176" data-id="4565186" data-parent_id="4565176" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format bad bad1">
			ХеХе <a href="http://habrahabr.ru/blogs/gdev/136878/#comment_4565177">Вместе </a>запостали. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565186">
	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4565214">
	
	
		<div class="info  	" rel="4565214">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565214" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/B08AH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/B08AH/" class="username">B08AH</a>
			<time datetime="2012-01-27T16:07:02+04:00">27 января 2012, 16:07</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565214" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			кстати про аппроксимацию и интерполяцию. читал про игру Supreme Commander. там обсчет игрового состояния идет 10 раз в секунду всего. при этом фпс 60 рисует абсолютно плавное, и при этом анимированное движение. анимация вся явно в треде отображения. тред игросостояния <br>
я так полагаю, что тред отображения при этом всегда должен запаздывать. ибо ракета должна попасть в цель, что может произойти по времени между этими двумя игровыми отсчетами. и тред игросостояния собственно не просто следующее состояние" должен выдавать, а всю достаточную для аппроксимации информацию.<br>
и кстати игра утилизирует 2 треда. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565214">
	 
		
<div class="comment_item" id="comment_4565238">
	
	
		<div class="info  	" rel="4565238">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565238" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/B08AH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/B08AH/" class="username">B08AH</a>
			<time datetime="2012-01-27T16:14:34+04:00">27 января 2012, 16:14</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565238" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565214" data-id="4565238" data-parent_id="4565214" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			хмм… редактирование съело кучу текста… ну ладно… 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565238">
	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565259">
	
	
		<div class="info  	" rel="4565259">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565259" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T16:21:22+04:00">27 января 2012, 16:21</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565259" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565214" data-id="4565259" data-parent_id="4565214" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Я думал о границах применения интерполяции. Если прогнозировать движение объекта, на которое оказывает влияние пользовательский ввод или другие в общем случае случайные факторы, то прогноз и интерполяция с использованием текущих параметров движения объекта будет давать пренебрежимую погрешность лишь на коротких промежутках времени. Видимо 1/10 секунды — достаточно короткий таймсэмпл.<br>
Про физику и дифф. ур-ия тут умолчим. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565259">
	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4565276">
	
	
		<div class="info  	" rel="4565276">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565276" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/Rustam/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/Rustam/" class="username">Rustam</a>
			<time datetime="2012-01-27T16:30:06+04:00">27 января 2012, 16:30</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565276" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			про Unity3d не совсем верно описано. <br>
Да, там нет единого цикла, который обновляет игру. Зато каждый объект может обновить свое(ну или если надо, то и другого объекта) состояние.<br>
В юнитях в классах, наследующиесях от MonoBehaviour, есть такие методы как Update, FixedUpdate, LateUpdate. <br>
Update вызывается при обновлении каждого фрейма. LateUpdate вызывается после выполнения Update(к примеру, на апдейте мы пересчитали данных, а на LateUpdate мы отрисовали с использованием уже обновленных данных). <br>
<br>
А FixedUpdate — это такой же апдейт, но вызывается раз в определенное время, которое задается в настройках проекта (то есть не зависит от быстродействия девайса). 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565276">
	 
		
<div class="comment_item" id="comment_4565286">
	
	
		<div class="info  	" rel="4565286">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565286" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 1: ↑1 и ↓0">+1</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T16:34:13+04:00">27 января 2012, 16:34</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565286" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565276" data-id="4565286" data-parent_id="4565276" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			А кем все эти эвенты вызываются? В фоне петля должна иметься какая-то. Либо все компоненты — отдельные треды в некотором пуле. Так или иначе петля есть? 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565286">
	 
		
<div class="comment_item" id="comment_4565900">
	
	
		<div class="info  	" rel="4565900">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565900" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/Rustam/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/Rustam/" class="username">Rustam</a>
			<time datetime="2012-01-27T20:12:39+04:00">27 января 2012, 20:12</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565900" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565286" data-id="4565900" data-parent_id="4565286" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Ну да, движок вызывает эти методы. Цикл зарыт в самом движке. При этом каждый компонент, назначенный гейм-объекту, является по своей сути объектом. Все компоненты по сути регистрируется у движка и в назначенное время движок дергает эвент у каждого из них.  
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565900">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4565765">
	
	
		<div class="info  	" rel="4565765">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565765" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 2: ↑2 и ↓0">+2</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/Ockonal/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_18.png" alt=""></a>
			<a href="http://habrahabr.ru/users/Ockonal/" class="username">Ockonal</a>
			<time datetime="2012-01-27T19:27:51+04:00">27 января 2012, 19:27</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565765" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Достаточно много работаю в геймдеве и согласен, новички очень часто не понимают этой темы. Теперь будет ссылка, куда их можно послать :) 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565765">
	 
		
<div class="comment_item" id="comment_4567616">
	
	
		<div class="info  	" rel="4567616">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4567616" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/leanid/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/leanid/" class="username">leanid</a>
			<time datetime="2012-01-28T19:44:22+04:00">28 января 2012, 19:44</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4567616" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565765" data-id="4567616" data-parent_id="4565765" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Я тоже не первый год работаю в геймдеве, и мне эта ссылка «не очень». Лучше отправить человека в открытый простой движок, например HGE для 2D, или OGRE если нужно что-то повеселее и пусть он там полазит. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4567616">
	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4566198">
	
	
		<div class="info  	" rel="4566198">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566198" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/Dukobpa3/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_18.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/Dukobpa3/" class="username">Dukobpa3</a>
			<time datetime="2012-01-27T22:59:33+04:00">27 января 2012, 22:59</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566198" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Реквестиирую флешеров в тред))<br>
Поделитесь своими размышлениями по сабжу. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566198">
	 
		
<div class="comment_item" id="comment_4566362">
	
	
		<div class="info  	" rel="4566362">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566362" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/erlioniel/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_23.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/erlioniel/" class="username">erlioniel</a>
			<time datetime="2012-01-28T00:27:59+04:00">28 января 2012, 00:27</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566362" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566198" data-id="4566362" data-parent_id="4566198" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			А собственно что вы хотите услышать? Все приведенные принципы работают для любого языка программирования. Или вы думаете что пульс игры на Actionscript выглядит по другому? :) 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566362">
	 
		
<div class="comment_item" id="comment_4566369">
	
	
		<div class="info  	" rel="4566369">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566369" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/Dukobpa3/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_18.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/Dukobpa3/" class="username">Dukobpa3</a>
			<time datetime="2012-01-28T00:35:01+04:00">28 января 2012, 00:35</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566369" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566362" data-id="4566369" data-parent_id="4566362" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Ну так то оно так, только даже таймер во флеше от фпс зависит и его обновление не возможно чаще чем раз в кадр. Т.е. 1/25-30 секунды или 1/60 секунды. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566369">
	 
		
<div class="comment_item" id="comment_4567096">
	
	
		<div class="info  	" rel="4567096">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4567096" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/erlioniel/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_23.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/erlioniel/" class="username">erlioniel</a>
			<time datetime="2012-01-28T14:16:41+04:00">28 января 2012, 14:16</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4567096" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566369" data-id="4567096" data-parent_id="4566369" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Насколько я знаю там эту систему привязывают к Enter Frame-у и работает она аналогично — проверяет время, которое было между кадрами, вызывает необходимое количество update_game() после этого вызывает уже display_game()<br>
<br>
Но переменного FPS на флеше не получится, потому что там в любом случае ФПС ограничен настройкой флеш плеера. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4567096">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4566884">
	
	
		<div class="info  	" rel="4566884">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566884" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/maaboo/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/maaboo/" class="username">maaboo</a>
			<time datetime="2012-01-28T12:11:36+04:00">28 января 2012, 12:11</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566884" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			В Box2d вроде как единственный верный путь — использовать постоянный шаг физики с переменным шагом отрисовки. К сожалению, я не программист, поэтому не могу сказать точно. Там даже в комментариях к коду ссылка на статью есть. ;) 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566884">
	 
		
<div class="comment_item" id="comment_4566906">
	
	
		<div class="info  	" rel="4566906">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566906" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-28T12:32:58+04:00">28 января 2012, 12:32</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566906" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566884" data-id="4566906" data-parent_id="4566884" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Не копался в Box2D, но читал/смотрел туториал про то как создается легковесный игровой физический движок. Как раз «проповедовался» подход на основе переменных промежутков времени. Применительно к линейному перемещению — просто вычислялось приращение позиции в зависимости от скорости и пройденного времени. От интегрирования дифф. уравнений настоятельно рекомендуют отказаться.<br>
Поэтому подход с постоянным шагом не является и не заявляется как единственно верный. Но на мой взгляд — это способ получить более реалистичную физику, и такой подход в чем-то сильно упрощает реализацию физики. Конечно, появляются сложности выдерживания этого постоянного шага. Потому я и писал, что тред с обновлением состояния (или только тред физики) должен иметь наивысший приоритет. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566906">
	 
		
<div class="comment_item" id="comment_4566923">
	
	
		<div class="info  	" rel="4566923">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566923" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/maaboo/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/maaboo/" class="username">maaboo</a>
			<time datetime="2012-01-28T12:42:42+04:00">28 января 2012, 12:42</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566923" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566906" data-id="4566923" data-parent_id="4566906" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Ну возможно для разных задач имеет смысл использовать разный подход. Я копался на форумах и основной подход был в воспроизводимости результатов. При использовании переменного шага воспроизводимость не может быть 100%, ибо существуют ошибки округления и прочий квантовый шум. А идея как раз была в 100% воспроизводимости (те же реплеи, но уже с применением реальной физики).<br>
<br>
Вот, что я использую в своём прототипе:<br>
<br>
-(void) update: (ccTime) dt // Using FIXED timestep<br>
{<br>
 static double timeAccumulator = 0;<br>
 <br>
 timeAccumulator += dt;<br>
 <br>
 if (timeAccumulator &gt; (MAX_CYCLES_PER_FRAME * UPDATE_INTERVAL)) {<br>
 timeAccumulator = UPDATE_INTERVAL;<br>
 } <br>
 <br>
 while (timeAccumulator&gt;=UPDATE_INTERVAL) {<br>
 <br>
 timeAccumulator -= UPDATE_INTERVAL;<br>
 <br>
 world-&gt;Step(UPDATE_INTERVAL, velocityIterations, positionIterations);<br>
 <br>
 for (b2Body *b = world-&gt;GetBodyList(); b; b=b-&gt;GetNext()) {<br>
 if (b-&gt;GetUserData() != NULL) {<br>
 }<br>
 }<br>
 //<br>
 self.hero.jumpTimeout--;<br>
 [self.hero update];<br>
 // <br>
 [self processContacts];<br>
 [self addBody];<br>
 [self removeBody];<br>
 }<br>
}<br>
<br>
Не работает разметка что-то… 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566923">
	 
		
<div class="comment_item" id="comment_4567532">
	
	
		<div class="info  	" rel="4567532">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4567532" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-28T18:49:19+04:00">28 января 2012, 18:49</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4567532" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566923" data-id="4567532" data-parent_id="4566923" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Как я понял в этом коде вычисляется сколько заданных квантов времени укладывается в прошедшем промежутке времени. Однако в аккумуляторе опять будет накапливаться значительная ошибка, т.к. при малом «dt» ошибка округления (особенно при хранении dt во float) будет достаточно велика. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4567532">
	 
		
<div class="comment_item" id="comment_4567547">
	
	
		<div class="info  	" rel="4567547">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4567547" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/maaboo/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/maaboo/" class="username">maaboo</a>
			<time datetime="2012-01-28T19:00:39+04:00">28 января 2012, 19:00</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4567547" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4567532" data-id="4567547" data-parent_id="4567532" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Ну фик знает, как я уже сказал, я не программист и скопипастил этот код чуть ли не с приведённого источника. Как-нибудь на досуге покажу знакомым гуру, если вдруг критично станет. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4567547">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4641991">
	
	
		<div class="info  	" rel="4641991">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4641991" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/b1nom/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/b1nom/" class="username">b1nom</a>
			<time datetime="2012-02-27T16:09:13+04:00">27 февраля 2012, 16:09</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4641991" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			<blockquote>Прим. перев.: в движке NeoAxis для физического объекта можно выставлять флаг Continuous Collision Detection; подозреваю, что по нему как раз и выполняется обработка, подобная описанной выше реализации игрового цикла.</blockquote><br>
CCD используется для детектирования коллизий быстрых объектов. Насколько я помню, есть 2 основных подхода:<br>
1. Увеличить TICKS_PER_SECOND;<br>
2. Быстрый объект растянуть по всему пути его следования. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4641991">
	 
		
<div class="comment_item" id="comment_4648466">
	
	
		<div class="info  	" rel="4648466">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4648466" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-02-29T17:33:54+04:00">29 февраля 2012, 17:33</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4648466" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4641991" data-id="4648466" data-parent_id="4641991" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Как я понял в NeoAxis делается интерполяция все-таки — просчитываются два положения между стандартными тиками и вычисляется позиция в промежутке.<br>
<br>
&gt;1. Увеличить TICKS_PER_SECOND;<br>
В шутерах будет напряжно.<br>
<br>
&gt;2. Быстрый объект растянуть по всему пути его следования.<br>
Сложно реализовать при криволинейных траекториях (особенно при действии силовых полей). 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4648466">
	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4648771">
	
	
		<div class="info  	" rel="4648771">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4648771" class="voting   ">
										
				
					<span отображения должны быть полностью независимы, чего собственно и добивается автор пытаясь абстрагировать механику игры от фпс.<br>
<br>
как мне кажется проще и правильнее сделать два треда. в одном updateGame, в другом displayGame. и соответственно первый второму через пайп скармливает данные для отображения.<br>
 чем колхозить вот такую вот «двухзадачность», которая еще и при этом не сможет двухядерник даже напрячь. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565176">
	 
		
<div class="comment_item" id="comment_4565186">
	
	
		<div class="info  	" rel="4565186">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565186" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  negative">
						<span class="score" title="Всего 1: ↑0 и ↓1">–1</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T15:59:00+04:00">27 января 2012, 15:59</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565186" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565176" data-id="4565186" data-parent_id="4565176" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format bad bad1">
			ХеХе <a href="http://habrahabr.ru/blogs/gdev/136878/#comment_4565177">Вместе </a>запостали. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565186">
	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4565214">
	
	
		<div class="info  	" rel="4565214">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565214" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/B08AH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/B08AH/" class="username">B08AH</a>
			<time datetime="2012-01-27T16:07:02+04:00">27 января 2012, 16:07</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565214" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			кстати про аппроксимацию и интерполяцию. читал про игру Supreme Commander. там обсчет игрового состояния идет 10 раз в секунду всего. при этом фпс 60 рисует абсолютно плавное, и при этом анимированное движение. анимация вся явно в треде отображения. тред игросостояния <br>
я так полагаю, что тред отображения при этом всегда должен запаздывать. ибо ракета должна попасть в цель, что может произойти по времени между этими двумя игровыми отсчетами. и тред игросостояния собственно не просто следующее состояние" должен выдавать, а всю достаточную для аппроксимации информацию.<br>
и кстати игра утилизирует 2 треда. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565214">
	 
		
<div class="comment_item" id="comment_4565238">
	
	
		<div class="info  	" rel="4565238">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565238" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/B08AH/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/B08AH/" class="username">B08AH</a>
			<time datetime="2012-01-27T16:14:34+04:00">27 января 2012, 16:14</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565238" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565214" data-id="4565238" data-parent_id="4565214" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			хмм… редактирование съело кучу текста… ну ладно… 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565238">
	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4565259">
	
	
		<div class="info  	" rel="4565259">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565259" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T16:21:22+04:00">27 января 2012, 16:21</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565259" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565214" data-id="4565259" data-parent_id="4565214" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Я думал о границах применения интерполяции. Если прогнозировать движение объекта, на которое оказывает влияние пользовательский ввод или другие в общем случае случайные факторы, то прогноз и интерполяция с использованием текущих параметров движения объекта будет давать пренебрежимую погрешность лишь на коротких промежутках времени. Видимо 1/10 секунды — достаточно короткий таймсэмпл.<br>
Про физику и дифф. ур-ия тут умолчим. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565259">
	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4565276">
	
	
		<div class="info  	" rel="4565276">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565276" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/Rustam/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/Rustam/" class="username">Rustam</a>
			<time datetime="2012-01-27T16:30:06+04:00">27 января 2012, 16:30</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565276" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			про Unity3d не совсем верно описано. <br>
Да, там нет единого цикла, который обновляет игру. Зато каждый объект может обновить свое(ну или если надо, то и другого объекта) состояние.<br>
В юнитях в классах, наследующиесях от MonoBehaviour, есть такие методы как Update, FixedUpdate, LateUpdate. <br>
Update вызывается при обновлении каждого фрейма. LateUpdate вызывается после выполнения Update(к примеру, на апдейте мы пересчитали данных, а на LateUpdate мы отрисовали с использованием уже обновленных данных). <br>
<br>
А FixedUpdate — это такой же апдейт, но вызывается раз в определенное время, которое задается в настройках проекта (то есть не зависит от быстродействия девайса). 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565276">
	 
		
<div class="comment_item" id="comment_4565286">
	
	
		<div class="info  	" rel="4565286">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565286" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 1: ↑1 и ↓0">+1</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-27T16:34:13+04:00">27 января 2012, 16:34</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565286" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565276" data-id="4565286" data-parent_id="4565276" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			А кем все эти эвенты вызываются? В фоне петля должна иметься какая-то. Либо все компоненты — отдельные треды в некотором пуле. Так или иначе петля есть? 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565286">
	 
		
<div class="comment_item" id="comment_4565900">
	
	
		<div class="info  	" rel="4565900">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565900" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/Rustam/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/Rustam/" class="username">Rustam</a>
			<time datetime="2012-01-27T20:12:39+04:00">27 января 2012, 20:12</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565900" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565286" data-id="4565900" data-parent_id="4565286" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Ну да, движок вызывает эти методы. Цикл зарыт в самом движке. При этом каждый компонент, назначенный гейм-объекту, является по своей сути объектом. Все компоненты по сути регистрируется у движка и в назначенное время движок дергает эвент у каждого из них.  
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565900">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4565765">
	
	
		<div class="info  	" rel="4565765">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4565765" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 2: ↑2 и ↓0">+2</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/Ockonal/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_18.png" alt=""></a>
			<a href="http://habrahabr.ru/users/Ockonal/" class="username">Ockonal</a>
			<time datetime="2012-01-27T19:27:51+04:00">27 января 2012, 19:27</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4565765" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Достаточно много работаю в геймдеве и согласен, новички очень часто не понимают этой темы. Теперь будет ссылка, куда их можно послать :) 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4565765">
	 
		
<div class="comment_item" id="comment_4567616">
	
	
		<div class="info  	" rel="4567616">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4567616" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/leanid/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/leanid/" class="username">leanid</a>
			<time datetime="2012-01-28T19:44:22+04:00">28 января 2012, 19:44</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4567616" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4565765" data-id="4567616" data-parent_id="4565765" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Я тоже не первый год работаю в геймдеве, и мне эта ссылка «не очень». Лучше отправить человека в открытый простой движок, например HGE для 2D, или OGRE если нужно что-то повеселее и пусть он там полазит. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4567616">
	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4566198">
	
	
		<div class="info  	" rel="4566198">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566198" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/Dukobpa3/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_18.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/Dukobpa3/" class="username">Dukobpa3</a>
			<time datetime="2012-01-27T22:59:33+04:00">27 января 2012, 22:59</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566198" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Реквестиирую флешеров в тред))<br>
Поделитесь своими размышлениями по сабжу. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566198">
	 
		
<div class="comment_item" id="comment_4566362">
	
	
		<div class="info  	" rel="4566362">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566362" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/erlioniel/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_23.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/erlioniel/" class="username">erlioniel</a>
			<time datetime="2012-01-28T00:27:59+04:00">28 января 2012, 00:27</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566362" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566198" data-id="4566362" data-parent_id="4566198" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			А собственно что вы хотите услышать? Все приведенные принципы работают для любого языка программирования. Или вы думаете что пульс игры на Actionscript выглядит по другому? :) 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566362">
	 
		
<div class="comment_item" id="comment_4566369">
	
	
		<div class="info  	" rel="4566369">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566369" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/Dukobpa3/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_18.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/Dukobpa3/" class="username">Dukobpa3</a>
			<time datetime="2012-01-28T00:35:01+04:00">28 января 2012, 00:35</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566369" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566362" data-id="4566369" data-parent_id="4566362" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Ну так то оно так, только даже таймер во флеше от фпс зависит и его обновление не возможно чаще чем раз в кадр. Т.е. 1/25-30 секунды или 1/60 секунды. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566369">
	 
		
<div class="comment_item" id="comment_4567096">
	
	
		<div class="info  	" rel="4567096">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4567096" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/erlioniel/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_23.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/erlioniel/" class="username">erlioniel</a>
			<time datetime="2012-01-28T14:16:41+04:00">28 января 2012, 14:16</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4567096" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566369" data-id="4567096" data-parent_id="4566369" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Насколько я знаю там эту систему привязывают к Enter Frame-у и работает она аналогично — проверяет время, которое было между кадрами, вызывает необходимое количество update_game() после этого вызывает уже display_game()<br>
<br>
Но переменного FPS на флеше не получится, потому что там в любом случае ФПС ограничен настройкой флеш плеера. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4567096">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4566884">
	
	
		<div class="info  	" rel="4566884">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566884" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/maaboo/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/maaboo/" class="username">maaboo</a>
			<time datetime="2012-01-28T12:11:36+04:00">28 января 2012, 12:11</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566884" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			В Box2d вроде как единственный верный путь — использовать постоянный шаг физики с переменным шагом отрисовки. К сожалению, я не программист, поэтому не могу сказать точно. Там даже в комментариях к коду ссылка на статью есть. ;) 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566884">
	 
		
<div class="comment_item" id="comment_4566906">
	
	
		<div class="info  	" rel="4566906">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566906" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-28T12:32:58+04:00">28 января 2012, 12:32</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566906" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566884" data-id="4566906" data-parent_id="4566884" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Не копался в Box2D, но читал/смотрел туториал про то как создается легковесный игровой физический движок. Как раз «проповедовался» подход на основе переменных промежутков времени. Применительно к линейному перемещению — просто вычислялось приращение позиции в зависимости от скорости и пройденного времени. От интегрирования дифф. уравнений настоятельно рекомендуют отказаться.<br>
Поэтому подход с постоянным шагом не является и не заявляется как единственно верный. Но на мой взгляд — это способ получить более реалистичную физику, и такой подход в чем-то сильно упрощает реализацию физики. Конечно, появляются сложности выдерживания этого постоянного шага. Потому я и писал, что тред с обновлением состояния (или только тред физики) должен иметь наивысший приоритет. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566906">
	 
		
<div class="comment_item" id="comment_4566923">
	
	
		<div class="info  	" rel="4566923">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4566923" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/maaboo/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/maaboo/" class="username">maaboo</a>
			<time datetime="2012-01-28T12:42:42+04:00">28 января 2012, 12:42</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4566923" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566906" data-id="4566923" data-parent_id="4566906" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Ну возможно для разных задач имеет смысл использовать разный подход. Я копался на форумах и основной подход был в воспроизводимости результатов. При использовании переменного шага воспроизводимость не может быть 100%, ибо существуют ошибки округления и прочий квантовый шум. А идея как раз была в 100% воспроизводимости (те же реплеи, но уже с применением реальной физики).<br>
<br>
Вот, что я использую в своём прототипе:<br>
<br>
-(void) update: (ccTime) dt // Using FIXED timestep<br>
{<br>
 static double timeAccumulator = 0;<br>
 <br>
 timeAccumulator += dt;<br>
 <br>
 if (timeAccumulator &gt; (MAX_CYCLES_PER_FRAME * UPDATE_INTERVAL)) {<br>
 timeAccumulator = UPDATE_INTERVAL;<br>
 } <br>
 <br>
 while (timeAccumulator&gt;=UPDATE_INTERVAL) {<br>
 <br>
 timeAccumulator -= UPDATE_INTERVAL;<br>
 <br>
 world-&gt;Step(UPDATE_INTERVAL, velocityIterations, positionIterations);<br>
 <br>
 for (b2Body *b = world-&gt;GetBodyList(); b; b=b-&gt;GetNext()) {<br>
 if (b-&gt;GetUserData() != NULL) {<br>
 }<br>
 }<br>
 //<br>
 self.hero.jumpTimeout--;<br>
 [self.hero update];<br>
 // <br>
 [self processContacts];<br>
 [self addBody];<br>
 [self removeBody];<br>
 }<br>
}<br>
<br>
Не работает разметка что-то… 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4566923">
	 
		
<div class="comment_item" id="comment_4567532">
	
	
		<div class="info  	" rel="4567532">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4567532" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-01-28T18:49:19+04:00">28 января 2012, 18:49</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4567532" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4566923" data-id="4567532" data-parent_id="4566923" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Как я понял в этом коде вычисляется сколько заданных квантов времени укладывается в прошедшем промежутке времени. Однако в аккумуляторе опять будет накапливаться значительная ошибка, т.к. при малом «dt» ошибка округления (особенно при хранении dt во float) будет достаточно велика. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4567532">
	 
		
<div class="comment_item" id="comment_4567547">
	
	
		<div class="info  	" rel="4567547">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4567547" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/maaboo/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/maaboo/" class="username">maaboo</a>
			<time datetime="2012-01-28T19:00:39+04:00">28 января 2012, 19:00</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4567547" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4567532" data-id="4567547" data-parent_id="4567532" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Ну фик знает, как я уже сказал, я не программист и скопипастил этот код чуть ли не с приведённого источника. Как-нибудь на досуге покажу знакомым гуру, если вдруг критично станет. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4567547">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4641991">
	
	
		<div class="info  	" rel="4641991">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4641991" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/b1nom/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/b1nom/" class="username">b1nom</a>
			<time datetime="2012-02-27T16:09:13+04:00">27 февраля 2012, 16:09</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4641991" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			<blockquote>Прим. перев.: в движке NeoAxis для физического объекта можно выставлять флаг Continuous Collision Detection; подозреваю, что по нему как раз и выполняется обработка, подобная описанной выше реализации игрового цикла.</blockquote><br>
CCD используется для детектирования коллизий быстрых объектов. Насколько я помню, есть 2 основных подхода:<br>
1. Увеличить TICKS_PER_SECOND;<br>
2. Быстрый объект растянуть по всему пути его следования. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4641991">
	 
		
<div class="comment_item" id="comment_4648466">
	
	
		<div class="info  	" rel="4648466">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4648466" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-02-29T17:33:54+04:00">29 февраля 2012, 17:33</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4648466" class="link_to_comment">#</a>
			
			
				<a href="http://habrahabr.ru/post/136878/#comment_4641991" data-id="4648466" data-parent_id="4641991" class="to_parent">↑</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Как я понял в NeoAxis делается интерполяция все-таки — просчитываются два положения между стандартными тиками и вычисляется позиция в промежутке.<br>
<br>
&gt;1. Увеличить TICKS_PER_SECOND;<br>
В шутерах будет напряжно.<br>
<br>
&gt;2. Быстрый объект растянуть по всему пути его следования.<br>
Сложно реализовать при криволинейных траекториях (особенно при действии силовых полей). 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4648466">
	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4648771">
	
	
		<div class="info  	" rel="4648771">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4648771" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/b1nom/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/stub-use.gif" alt=""></a>
			<a href="http://habrahabr.ru/users/b1nom/" class="username">b1nom</a>
			<time datetime="2012-02-29T19:29:59+04:00">29 февраля 2012, 19:29</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4648771" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			<blockquote>Как я понял в NeoAxis делается интерполяция все-таки — просчитываются два положения между стандартными тиками и вычисляется позиция в промежутке.<br>
<br>
&gt;1. Увеличить TICKS_PER_SECOND;<br>
В шутерах будет напряжно.</blockquote><br>
Поэтому частота обработки увеличивается только для объекта, для которого CCD включен (для пули). Получается как раз то, о чем вы написали — вычисляются промежуточные позиции. Иначе пуля за один тик может преодолеть большое расстояние и пролететь сквозь тонкую стенку, а не столкнуться с ней.<br>
<br>
<blockquote>&gt;2. Быстрый объект растянуть по всему пути его следования.<br>
Сложно реализовать при криволинейных траекториях (особенно при действии силовых полей).</blockquote><br>
Да. Но при прямолинейном движении иногда можно получить выигрыш. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4648771">
	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4650425">
	
	
		<div class="info  	" rel="4650425">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4650425" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: ↑0 и ↓0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/HomoLuden/" class="avatar"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/small_24.jpg" alt=""></a>
			<a href="http://habrahabr.ru/users/HomoLuden/" class="username">HomoLuden</a>
			<time datetime="2012-03-01T11:24:09+04:00"> 1 марта 2012, 11:24</time>
			<a href="http://habrahabr.ru/post/136878/#comment_4650425" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			&gt; Поэтому частота обработки увеличивается только для объекта, для которого CCD включен (для пули). Получается как раз то, о чем вы написали — вычисляются промежуточные позиции.<br>
<br>
Интерполяция и увеличение частоты обработки — суть разные подходы. Интерполяция может выполняться на стандартных тиках. Просто делается проверка могла ли произойти коллизия быстрого объекта с медленным между последними двумя тиками или произойдет ли она между текущим тиком и следующим. В шутерах обрабатывать позиции пуль с частотами кратными главной частоте тиков тяжеловато, как я понимаю. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4650425">
	
	</div>
</div>

  
</div>

		
	
		
			<p class="for_users_only_msg">Только зарегистрированные пользователи могут оставлять комментарии. <a href="http://habrahabr.ru/login/">Войдите</a>, пожалуйста.</p>
		
		
	



		<div id="edit_tags_form" class="hidden">
<form action="http://habrahabr.ru/post/136878/#" method="post">
  <input type="hidden" name="action" value="add">
  <input type="hidden" name="ti" value="0">
  <input type="hidden" name="tt" value="0">
  <label>Пометьте топик понятными вам метками, если хотите</label>
  <input type="text" name="tags_string" class="tags_string">
  <div class="description">Метки лучше разделять запятой. Например: <i>общение, социальные сети, myspace.com, подростки, мердок</i></div>
  <input type="submit" value="Сохранить" class="submit"> или <a href="http://habrahabr.ru/post/136878/#" class="close" onclick="return close_edit_tags()">закрыть</a>
</form>
</div>
	
	

  </div>
  <div class="sidebar_right">
	
		




	<div class="banner_240x400">

		<script type="text/javascript">
			(function(){
				var custom = [];
			/* custom params */
			
				custom[1]	= 'gdev';
			
				

			/* end of custom params */
				custom.getStd = function(){for(var i=0,j,s=[];i<this.length;i++){if(this[i])s.push((!j?(j=1,i+'='):'')+escape(this[i]));else j=0}return s.length?'&custom='+s.join(';'):''};

				var RndNum4NoCash = Math.round(Math.random() * 1000000000),
					ar_Tail = escape(document.referrer || 'unknown');
				document.write('<iframe src="http://ad.adriver.ru/cgi-bin/erle.cgi?'
					+ 'sid=176776&target=top&bt=22&pz=0&rnd=' + RndNum4NoCash + '&tail256=' + ar_Tail + custom.getStd()
					+ '" frameborder=0 vspace=0 hspace=0 width=240 height=400 marginwidth=0'
					+ ' marginheight=0 scrolling=no></iframe>');
			})();
		</script>

	</div>






		

<div class="block daily_best_posts">
  <div class="title">Лучшее <sup>за 24 часа</sup> ↓ </div>
  <div class="posts_list">
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/145647/" class="post_name">Прощай, Selectel</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/145654/" class="post_name">Трансляция c Apple WWDC 2012</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/145606/" class="post_name">Распаковываем Raspberry Pi</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/144849/" class="post_name">Краткий обзор Zopo ZP100, или как китайцы научились делать телефоны</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/145658/" class="post_name">30 наиболее популярных паролей, украденных с LinkedIn</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/145621/" class="post_name">Алгоритм шифрования Anubis на PHP</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/145643/" class="post_name">Magenta: open-source клон iOS</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/145649/" class="post_name">Эффективная веб-разработка c Visual Studio 2012: нововведения в редакторы HTML/CSS и JavaScript</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/145642/" class="post_name">LinkedIn начал использовать соль</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/145644/" class="post_name">Сериалы: онлайн-просмотр или скачивание?</a>
      </div>
    
  </div>
  <div class="all">« <a href="http://habrahabr.ru/top/">все лучшие</a></div>
</div>

		


<div class="block similar_posts">

	<div class="title">Похожие посты ↓ </div>
  <div class="posts_list">
  	
    	<div class="post_item">
    				<a class="post_name" href="http://habrahabr.ru/post/136878/">Игровые циклы или ЭлектроКардиоГама</a>
    				<span class="when">27.01.2012</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="http://habrahabr.ru/post/145156/">Как создавать эффективные мобильные решения для предприятий</a>
    				<span class="when">04.06.2012</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="http://habrahabr.ru/post/144981/">White Night: Mobile Games уже через две недели</a>
    				<span class="when">31.05.2012</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="http://habrahabr.ru/post/143388/">Корректная реализация разностной схемы ПИД регулятора</a>
    				<span class="when">06.05.2012</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="http://habrahabr.ru/post/140853/">Выставка ИТ-решений в Киеве</a>
    				<span class="when">28.03.2012</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="http://habrahabr.ru/post/139218/">Insurgent Games делает все игры бесплатными и переводит в Open Source</a>
    				<span class="when">01.03.2012</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="http://habrahabr.ru/post/138565/">Краткий обзор Windows Azure Toolkit for Social Games</a>
    				<span class="when">20.02.2012</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="http://habrahabr.ru/post/134798/">Итеративный подход к решению инженерных задач</a>
    				<span class="when">18.12.2011</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="http://habrahabr.ru/post/133466/">Indie Game Music Bundle</a>
    				<span class="when">27.11.2011</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="http://habrahabr.ru/post/132366/">Приближенное решение алгебраических и трансцендентных уравнений</a>
    				<span class="when">10.11.2011</span>
      </div>
  	
  </div>			
</div>




		


<div class="block live_broadcast_activity">
  <div class="title">Прямой эфир ↓ </div>
  <div class="posts_list">

    <div class="post_item">
      <a href="http://habrahabr.ru/users/bezumkin/" class="user_name">bezumkin</a> →
      <a href="http://habrahabr.ru/post/145669/#comment_4896192" class="post_name">Студента оштрафовали за сайт с субтитрами</a>&nbsp;<span class="count">15</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/imashaman/" class="user_name">imashaman</a> →
      <a href="http://habrahabr.ru/post/145606/#comment_4896191" class="post_name">Распаковываем Raspberry Pi</a>&nbsp;<span class="count">73</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/int80h/" class="user_name">int80h</a> →
      <a href="http://habrahabr.ru/post/145654/#comment_4896190" class="post_name">Трансляция c Apple WWDC 2012</a>&nbsp;<span class="count">265</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/Infernal/" class="user_name">Infernal</a> →
      <a href="http://habrahabr.ru/post/145667/#comment_4896188" class="post_name">Хеш + соль, как панацея от декрипта</a>&nbsp;<span class="count">1</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/aosnec/" class="user_name">aosnec</a> →
      <a href="http://habrahabr.ru/post/142213/#comment_4896185" class="post_name">Опенсорс-фотореализм на GPU: Cycles Render</a>&nbsp;<span class="count">62</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/VolCh/" class="user_name">VolCh</a> →
      <a href="http://habrahabr.ru/post/145659/#comment_4896184" class="post_name">Искусственный разум, интеллект, жизнь… Долго ли их еще ждать?</a>&nbsp;<span class="count">27</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/MATPOCKuH/" class="user_name">MATPOCKuH</a> →
      <a href="http://habrahabr.ru/post/145397/#comment_4896180" class="post_name">Кубик Радика или лунные часы</a>&nbsp;<span class="count">57</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/Fiery_Ice/" class="user_name">Fiery_Ice</a> →
      <a href="http://habrahabr.ru/post/145658/#comment_4896178" class="post_name">30 наиболее популярных паролей, украденных с LinkedIn</a>&nbsp;<span class="count">24</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/pawnhearts/" class="user_name">pawnhearts</a> →
      <a href="http://habrahabr.ru/post/145643/#comment_4896176" class="post_name">Magenta: open-source клон iOS</a>&nbsp;<span class="count">57</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/Kolonist/" class="user_name">Kolonist</a> →
      <a href="http://habrahabr.ru/post/145621/#comment_4896174" class="post_name">Алгоритм шифрования Anubis на PHP</a>&nbsp;<span class="count">11</span>
    </div>

  </div>
  
</div>



  
		

	
<style>
	/**
	 * tpl/posts/_sidebar/htmlblock/_toster.tpl
	 *
	 * Стили для HTML_блока "toster_htmlblock" 
	 */
	.sidebar_right .block.veeam_htmlblock{font-family: arial, sans-serif;}
	.sidebar_right .block.veeam_htmlblock .logo{margin-bottom:10px;}
	.sidebar_right .block.veeam_htmlblock .description{font-size:18px;color:#333;margin-bottom:10px;}
	.sidebar_right .block.veeam_htmlblock .description .title{color:#307f39;font-size:20px;margin-bottom:10px;}
	.sidebar_right .block.veeam_htmlblock .description p{font-size:12px;color:#333;line-height: 16px;margin-bottom:10px;}
	.sidebar_right .block.veeam_htmlblock .description .place_limit{color:#000;font-size:14px;margin-bottom:10px;}
	.sidebar_right .block.veeam_htmlblock .download{margin-bottom:10px;}

</style>
<div class="block veeam_htmlblock">
	<div class="logo"><a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&amp;ad=344753&amp;bt=21&amp;bid=1833061&amp;bn=1833061&amp;rnd=184515061"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/logo0000.png" alt=""></a></div>
	<div class="description">
		<div class="title">Cпециальные условия на покупку Veeam Essential Enterprise Edition.</div>
		<p>- аварийное восстановление;<br>
			- сбор данных;<br>
			- контроль изменений;<br>
			- мониторинг производительности;<br>
			- копирование виртуальных машин и т. д.</p>
	</div>
	<div class="download"><a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&amp;ad=344753&amp;bt=21&amp;bid=1833061&amp;bn=1833061&amp;rnd=184515061"><img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/button00.png" alt=""></a></div>

</div>	




   
		

<div class="block best_company">

		<div class="title">Компания дня <img src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/bg_cicle.png" title="
Компания, чей пост набрал максимальное количество баллов<br>
среди всех опубликованных в корпоративных блогах постах за <br>
прошедшие сутки. Учитываются посты, для которых истек срок голосования <br>(3 дня с момента публикации)." class="help-tip"></div>

		<div class="company_info">
			<div class="name">
			 <img class="favicon" src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/favicon_.ico" alt="Torrent Stream" height="16" width="16">
			 <div class="company_name"><a href="http://habrahabr.ru/company/torrentstream/" class="title">Torrent Stream</a></div>
			</div>

			<p>Последний пост:
				<a href="http://habrahabr.ru/company/torrentstream/blog/145338/">Torrent Stream для Linux/Ubuntu</a>
			</p>

			<div class="buttons">
  			<div id="fans_count">115 подписчиков</div>
  			
			</div>
		</div>

	</div>


		

<div class="block qa_activity">
  <div class="title">Q&amp;A ↓ </div>
  <div class="posts_list">

    <div class="post_item">
      <a href="http://habrahabr.ru/users/poisons/" class="user_name">poisons</a> →
      <a href="http://habrahabr.ru/qa/20446/#comment_97561" class="post_name">Материнская плата ноутбука</a>&nbsp;<span class="count">6</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/tau/" class="user_name">tau</a> →
      <a href="http://habrahabr.ru/qa/20453/#comment_97560" class="post_name">Можно ли проапгрейдить экран ноутбука?</a>&nbsp;<span class="count">2</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/MikhailEdoshin/" class="user_name">MikhailEdoshin</a> →
      <a href="http://habrahabr.ru/qa/20452/#comment_97559" class="post_name">Можно ли перелицензировать ПО GPL -&gt; BSD автором ?</a>&nbsp;<span class="count">1</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/ash_kgd/" class="user_name">ash_kgd</a> →
      <a href="http://habrahabr.ru/qa/20450/#answer_83181" class="post_name">Как правильно публиковать action в facebook?</a>&nbsp;<span class="count">1</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/Nepofigist/" class="user_name">Nepofigist</a> →
      <a href="http://habrahabr.ru/qa/20443/#comment_97558" class="post_name">Какой выбрать лёгкий ноутбук для разработчика?</a>&nbsp;<span class="count">9</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/s0rr0w/" class="user_name">s0rr0w</a> →
      <a href="http://habrahabr.ru/qa/20451/#comment_97556" class="post_name">PHP исходники личного кабинета</a>&nbsp;<span class="count">2</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/Ghostwriter/" class="user_name">Ghostwriter</a> →
      <a href="http://habrahabr.ru/qa/20447/#comment_97553" class="post_name">Подскажите шустрый push сервер с поддержкой websockets &amp; long polling и удобной интеграцией с php?</a>&nbsp;<span class="count">1</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/Aleks_ja/" class="user_name">Aleks_ja</a> →
      <a href="http://habrahabr.ru/qa/20448/#comment_97551" class="post_name">Стоит ли открыть исходный код ORM для PHP?</a>&nbsp;<span class="count">4</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/Ghostwriter/" class="user_name">Ghostwriter</a> →
      <a href="http://habrahabr.ru/qa/20442/#comment_97550" class="post_name">Принудительное включение HTTPS на публичных сервисах</a>&nbsp;<span class="count">2</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/yourway/" class="user_name">yourway</a> →
      <a href="http://habrahabr.ru/qa/20449/#comment_97549" class="post_name">Как сделать дублирование содержимого одного поля в другое на CMS DLE?</a>&nbsp;
    </div>

  </div>
  <div class="all">« <a href="http://habrahabr.ru/qa/">все вопросы</a></div>
  
</div>

		

<div class="block new_vacanies">
  <div class="title">О, работа! ↓ </div>
  <div class="vacancies">
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9289-back-end-net-guru-for-betsson">Back End .NET Guru for Betsson</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9288-senior-java-developer-backend-for-playtech_liferay-portal">Senior Java developer backend for Playtech_Liferay  Portal</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9287-net-developer-for-scalepoint">.Net developer for Scalepoint</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9286-senior-java-developer-backend-for-playtech_liferay-portal">Senior Java developer backend for Playtech_Liferay  Portal</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9285-back-end-net-guru-for-betsson">Back End .NET Guru for Betsson</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9284-net-developer-for-scalepoint">.Net developer for Scalepoint</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9283-menedzher-po-internet-marketingu">Менеджер по интернет-маркетингу</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9281-cistemnyy-administrator">Cистемный администратор</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9280-razrabotchik-veb-gis">Разработчик Веб-ГИС</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9275-front-end-razrabotchik">Front-end разработчик</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9273-php-programmist">PHP-программист</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9271-net-web-developer">.NET WEB Developer</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9269-veb-programmist">Веб-программист</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9268-lead-java-developer">Lead Java Developer</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9267-quality-assurance-and-testing-specialist">Quality Assurance and Testing Specialist</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9266-senior-java-developer-for-electronic-trading-connectivity">Senior Java Developer for electronic trading connectivity</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/9265-senior-rails-developer">Senior Rails Developer</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/8507-php-programmist-helpdesk">PHP программист (HelpDesk)</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/7808-veduschiy-php-programmist">Ведущий PHP программист</a>
		</div>
		
		<div class="job_item">
			<a href="http://hantim.ru/jobs/7807-veduschiy-veb-razrabotchik-rukovoditel-proekta">Ведущий веб-разработчик/Руководитель проекта</a>
		</div>
		
  </div>
  <div class="all">« <a href="http://hantim.ru/">все вакансии</a></div>

	</div>

		

		


<div class="block similar_events">
  <div class="title">Ближайшие события</div>
  <div class="events">
    
    <div class="event">
			
			<div class="date">
				<div class="dayname dayname_4"></div>
				<div class="day">14</div>
				<div class="month">июн</div>				
			</div>
			
			<div class="title">
			 <a href="http://habrahabr.ru/events/723/">«Решения для управления проектами. Об информационных технологиях простыми словами.»</a>			 
			</div>
		</div>
		
    <div class="event">
			
			<div class="date">
				<div class="dayname dayname_4"></div>
				<div class="day">14</div>
				<div class="month">июн</div>				
			</div>
			
			<div class="title">
			 <a href="http://habrahabr.ru/events/526/">White Nights: Mobile Games Conference</a>			 
			</div>
		</div>
		
    <div class="event">
			
			<div class="date">
				<div class="dayname dayname_4"></div>
				<div class="day">14</div>
				<div class="month">июн</div>				
			</div>
			
			<div class="title">
			 <a href="http://habrahabr.ru/events/800/">Набор в программу Microsoft Student Partner</a>			 
			</div>
		</div>
		
    <div class="event">
			
			<div class="date">
				<div class="dayname dayname_4"></div>
				<div class="day">14</div>
				<div class="month">июн</div>				
			</div>
			
			<div class="title">
			 <a href="http://habrahabr.ru/events/798/">Встреча JUG, 14 июня 2012 - Алексей Шипилёв и Сергей Куксенко - Оптимизация производительности (Java) приложений</a>			 
			</div>
		</div>
		
    <div class="event">
			
			<div class="date">
				<div class="dayname dayname_5"></div>
				<div class="day">15</div>
				<div class="month">июн</div>				
			</div>
			
			<div class="title">
			 <a href="http://habrahabr.ru/events/702/">Meet Magento Belarus 2012</a>			 
			</div>
		</div>
		
  </div>
  <div class="all">« <a href="http://habrahabr.ru/events/">все события</a></div>
</div>


	
  </div>
  <div class="clear"></div>

			
	
	
	<div class="rotated_posts">
		
			<div class="rotated_post">
				<a href="http://habrahabr.ru/post/143478/" class="grey">Как работает беспилотный автомобиль «Гугла»</a>
			</div>
		
			<div class="rotated_post">
				<a href="http://habrahabr.ru/post/140603/" class="grey">Frustro: невозможный шрифт</a>
			</div>
		
			<div class="rotated_post">
				<a href="http://habrahabr.ru/post/145578/" class="grey">Простая замена phpMyAdmin для гиков</a>
			</div>
		
	</div>
	

		  <div id="footer">
      
			
			<dl>
				<dd><a href="http://habrahabr.ru/login/">Войти</a></dd>
				<dd><a href="http://habrahabr.ru/register/">Регистрация</a></dd>
			</dl>
			
			<dl>
				<dt>Разделы</dt>

				<dd><a href="http://habrahabr.ru/qa/">Q&amp;A</a></dd>
				<dd><a href="http://habrahabr.ru/hubs/">Хабы</a></dd>
				<dd><a href="http://habrahabr.ru/events/">События</a></dd>
				<dd><a href="http://habrahabr.ru/companies/">Компании</a></dd>
				<dd><a href="http://habrahabr.ru/job/">Работа</a></dd>
				<dd><a href="http://habrahabr.ru/people/">Люди</a></dd>
			</dl>
			<dl>
				<dt>Посты</dt>
				
				<dd><a href="http://habrahabr.ru/posts/top/">Лучшие</a></dd>
				<dd><a href="http://habrahabr.ru/posts/collective/">Тематические</a></dd>
				<dd><a href="http://habrahabr.ru/posts/corporative/">Корпоративные</a></dd>
				<dd><a href="http://habrahabr.ru/sandbox/">Песочница</a></dd>
			</dl>
			<dl>
				<dt>Инфо</dt>
				<dd><a href="http://habrahabr.ru/info/about/">О сайте</a></dd>
				<dd><a href="http://habrahabr.ru/info/help/rules/">Правила</a></dd>
				<dd><a href="http://habrahabr.ru/info/help/">Помощь</a></dd>
				<dd><a href="http://habrahabr.ru/info/agreement/">Соглашение</a></dd>
				<dd><a href="http://habrahabr.ru/info/stats/">Статистика</a></dd>
			</dl>
			<dl>
				<dt>Услуги</dt>
				<dd><a href="http://habrahabr.ru/info/advertising/">Реклама</a></dd>
				<dd><a href="http://habrahabr.ru/info/advertising/corporate/">Корпоративные пакеты</a></dd>
				<dd><a href="http://habrahabr.ru/info/advertising/workshops/">Семинары</a></dd>
			</dl>
      <div class="copyright">
    		<a class="footer_logo" href="http://thematicmedia.ru/">Тематические Медиа</a>
    		<div class="about">
    			© 2006–2012<br>
    			«<a href="http://www.thematicmedia.ru/">Тематические Медиа</a>»
    		  <br><br>
  				Служба поддержки:<br>
  				<a href="mailto:support@habrahabr.ru" title="адрес службы поддержки пользователей">support@habrahabr.ru</a><br><br><br>
  				<a href="http://m.habrahabr.ru/">Мобильная версия</a>

			  </div>
      </div>

</div>
		</div>
	 	
		
    
		
    <script type="text/javascript">
      $(document).ready(function(){
        // test gggg
        // настройки всплывающих уведомлений
        $.jGrowl.defaults.closerTemplate = '<div>Закрыть все уведомления</div>';         
        
        // настройки тултипов
        $(".help-tip").tipTip({maxWidth: "auto", edgeOffset: 10});  
        
      });
      // global vars
      var g_base_url = 'habrahabr.ru';
      var g_show_xpanel = false;
      var g_base_fullurl = 'http://habrahabr.ru/';
      var g_is_guest = false;
       
    </script>
		
    <script type="text/javascript" src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/shortcut.js"></script>
		<script type="text/javascript" src="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/to_top00.js"></script>
		<link href="Игровые%20циклы%20или%20ЭлектроКардиоГама%20_%20Хабрахабр_files/_to_top0.css" rel="stylesheet" media="all">
		
<script type="text/javascript">
	/*<![CDATA[*/
	var ga = document.createElement('script');
		ga.setAttribute('async', 'true');
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	/* ]]>*/
</script>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(
	    ['_setAccount', 'UA-726094-1'],
	    ['_setDomainName', '.habrahabr.ru'],
	    ["_addOrganic", "mail.ru", "q"],
	    ["_addOrganic","rambler.ru", "words"],
	    ["_addOrganic","nigma.ru", "s"],
	    ["_addOrganic","blogs.yandex.ru", "text"],
	    ["_addOrganic","webalta.ru", "q"],
	    ["_addOrganic","aport.ru", "r"],
	    ["_addOrganic","akavita.by", "z"],
	    ["_addOrganic","meta.ua", "q"],
	    ["_addOrganic","bigmir.net", "q"],
	    ["_addOrganic","tut.by", "query"],
	    ["_addOrganic","all.by", "query"],
	    ["_addOrganic","i.ua", "q"],
	    ["_addOrganic","online.ua", "q"],
	    ["_addOrganic","a.ua", "s"],
	    ["_addOrganic","ukr.net", "search_query"],
	    ["_addOrganic","search.com.ua", "q"],
	    ["_addOrganic","search.ua", "query"],
	    ["_addOrganic","poisk.ru", "text"],
	    ["_addOrganic","km.ru", "sq"],
	    ["_addOrganic","liveinternet.ru", "ask"],
	    ["_addOrganic","gogo.ru", "q"],
	    ["_addOrganic","gde.ru", "keywords"],
	    ["_addOrganic","quintura.ru", "request"],
	    ['_trackPageview']
	);
	document.documentElement.firstChild.appendChild(ga);
</script>	
		
		
	</body>
</html>

<!-- This document saved from http://habrahabr.ru/post/136878/ -->
